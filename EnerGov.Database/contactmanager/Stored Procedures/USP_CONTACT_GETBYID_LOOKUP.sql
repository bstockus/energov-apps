CREATE PROCEDURE [contactmanager].[USP_CONTACT_GETBYID_LOOKUP]
(
	@ID CHAR(36)
)
AS
BEGIN
SET NOCOUNT ON;
SELECT 
	[GLOBALENTITY].[GLOBALENTITYID],
	[GLOBALENTITY].[PARENTGLOBALENTITYID],
	[GLOBALENTITY].[GLOBALENTITYNAME],
	[GLOBALENTITY].[ISCOMPANY],
	[GLOBALENTITY].[ISCONTACT],
	[GLOBALENTITY].[MANUFACTURER],
	[GLOBALENTITY].[VENDOR],
	[GLOBALENTITY].[SHIPPER],
	[GLOBALENTITY].[EMAIL],
	[GLOBALENTITY].[WEBSITE],
	[GLOBALENTITY].[BUSINESSPHONE],
	[GLOBALENTITY].[HOMEPHONE],
	[GLOBALENTITY].[MOBILEPHONE],
	[GLOBALENTITY].[OTHERPHONE],
	[GLOBALENTITY].[FAX],
	[GLOBALENTITY].[IMAGE],
	[GLOBALENTITY].[FIRSTNAME],
	[GLOBALENTITY].[LASTNAME],
	[GLOBALENTITY].[MIDDLENAME],
	[GLOBALENTITY].[TITLE],
	[GLOBALENTITY].[LASTCHANGEDON],
	[ChangedBy].[FNAME] + ' ' + [ChangedBy].[LNAME] LASTUPDATEDBY,	
	[GLOBALENTITY].[NAME1],
	[GLOBALENTITY].[NAME2],
	[GLOBALENTITY].[PREFCOMM],
	[GLOBALENTITY].[ISACTIVE]
FROM [dbo].[GLOBALENTITY]  WITH (NOLOCK)
LEFT OUTER JOIN [USERS] ChangedBy WITH (NOLOCK) ON ChangedBy.SUSERGUID = [GLOBALENTITY].LASTCHANGEDBY
WHERE
	[GLOBALENTITY].[GLOBALENTITYID] = @ID  

SELECT 
	[MAILINGADDRESS].[MAILINGADDRESSID],
	[MAILINGADDRESS].[ADDRESSLINE1],
	[MAILINGADDRESS].[ADDRESSLINE2],
	[MAILINGADDRESS].[ADDRESSLINE3],
	[MAILINGADDRESS].[CITY],
	[MAILINGADDRESS].[STATE],
	[MAILINGADDRESS].[COUNTY],
	[MAILINGADDRESS].[COUNTRY],
	[MAILINGADDRESS].[POSTALCODE],
	[MAILINGADDRESS].[COUNTRYTYPE],
	[MAILINGADDRESS].[POSTDIRECTION],
	[MAILINGADDRESS].[PREDIRECTION],
	[MAILINGADDRESS].[ADDRESSID],
	[MAILINGADDRESS].[ADDRESSTYPE],
	[MAILINGADDRESS].[STREETTYPE],
	[MAILINGADDRESS].[PARCELID],
	[MAILINGADDRESS].[PARCELNUMBER],
	[MAILINGADDRESS].[UNITORSUITE],
	[MAILINGADDRESS].[PROVINCE],
	[MAILINGADDRESS].[RURALROUTE],
	[MAILINGADDRESS].[STATION],
	[MAILINGADDRESS].[COMPSITE],
	[MAILINGADDRESS].[POBOX],
	[MAILINGADDRESS].[ATTN],
	[MAILINGADDRESS].[ROWVERSION],
	[MAILINGADDRESSCOUNTRYTYPE].[MAILINGADDRESSCOUNTRYTYPENAME],
	[GLOBALENTITYMAILINGADDRESS].[GLOBALENTITYID]
	FROM [MAILINGADDRESS] WITH (NOLOCK)
INNER JOIN [GLOBALENTITYMAILINGADDRESS] WITH (NOLOCK) ON [MAILINGADDRESS].[MAILINGADDRESSID] = [GLOBALENTITYMAILINGADDRESS].[MAILINGADDRESSID]
INNER JOIN [MAILINGADDRESSCOUNTRYTYPE] WITH (NOLOCK) ON [MAILINGADDRESSCOUNTRYTYPE].MAILINGADDRESSCOUNTRYTYPEID = [MAILINGADDRESS].COUNTRYTYPE
WHERE
	[GLOBALENTITYMAILINGADDRESS].[GLOBALENTITYID] = @ID

END