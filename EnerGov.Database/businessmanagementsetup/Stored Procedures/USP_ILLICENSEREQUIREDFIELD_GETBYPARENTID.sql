CREATE PROCEDURE [businessmanagementsetup].[USP_ILLICENSEREQUIREDFIELD_GETBYPARENTID]
(
@ILLICENSETYPEID CHAR(36)
)
AS
BEGIN

SET NOCOUNT ON;

SELECT 
	[dbo].[ILLICENSEREQUIREDFIELD].[REQUIREDCUSTOMFIELDID],
	[dbo].[ILLICENSETYPELICENSECLASS].[ILLICENSETYPEID],
	[dbo].[ILLICENSEREQUIREDFIELD].[ILLICENSETYPELICENSECLASSID],
	[dbo].[ILLICENSEREQUIREDFIELD].[GCUSTOMFIELD],
	[dbo].[ILLICENSEREQUIREDFIELD].[SORTORDER],
	CASE
		WHEN LEN(ISNULL([dbo].[CUSTOMFIELD].[SFIELDNAME],''))>0 THEN [dbo].[CUSTOMFIELD].[SFIELDNAME]
		ELSE [dbo].[CUSTOMFIELD].[SCUSTOMFIELD]
	END AS SFIELDNAME
FROM [dbo].[ILLICENSEREQUIREDFIELD]
LEFT JOIN [dbo].[ILLICENSETYPELICENSECLASS]
ON [dbo].[ILLICENSEREQUIREDFIELD].[ILLICENSETYPELICENSECLASSID]=[dbo].[ILLICENSETYPELICENSECLASS].[ILLICENSETYPELICENSECLASSID]
LEFT JOIN [dbo].[CUSTOMFIELD]
ON [dbo].[CUSTOMFIELD].[GCUSTOMFIELD]=[dbo].[ILLICENSEREQUIREDFIELD].[GCUSTOMFIELD]
WHERE [dbo].[ILLICENSETYPELICENSECLASS].[ILLICENSETYPEID]=@ILLICENSETYPEID

END