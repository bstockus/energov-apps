CREATE PROCEDURE [livelink].[USP_PARCELHOLD_GETBY_ORIGINNUMBER_SELECT_LOOKUP]    
(    
     @ORIGINNUMBERS HOLD_ORIGIN_NUMBERS READONLY -- ORIGINNUMBER    
	   
)    
AS    
BEGIN    
;WITH RAW_DATA    
AS(     
SELECT [PARCELHOLD].[PARCELHOLDID],    
        [PARCELHOLD].[HOLDSETUPID],    
        [PARCELHOLD].[ORIGINNUMBER],    
        [PARCELHOLD].[CREATEDDATE],    
  [USERS].[FNAME],    
  [USERS].[LNAME],    
        [PARCELHOLD].[ACTIVE],    
        ROW_NUMBER() OVER (PARTITION BY [PARCELHOLD].[ORIGINNUMBER]    
             ORDER BY [PARCELHOLD].[ORIGINNUMBER] DESC) AS ORDINAL    
FROM [dbo].[PARCELHOLD]
INNER JOIN [USERS] WITH (NOLOCK) ON [PARCELHOLD].[SUSERGUID]=[USERS].[SUSERGUID]     
WHERE [PARCELHOLD].[ORIGINNUMBER] IN (SELECT [ORIGINNUMBER] FROM @ORIGINNUMBERS) 
AND   [PARCELHOLD].ACTIVE = 1 
)    
SELECT *     
       FROM     
             RAW_DATA    
       WHERE    
             ORDINAL = 1;    
    
 EXEC  [livelink].[USP_HOLDTYPESETUPS_ORIGINNUMBER_GETBYIDS_LOOKUP] @ORIGINNUMBERS -- ORIGINNUMBER    
END