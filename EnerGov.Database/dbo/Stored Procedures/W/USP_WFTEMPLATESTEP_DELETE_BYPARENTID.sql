CREATE PROCEDURE [dbo].[USP_WFTEMPLATESTEP_DELETE_BYPARENTID]
(
@PARENTID CHAR(36)
)
AS
DELETE [dbo].[WFTEMPLATESTEPACTION] FROM [dbo].[WFTEMPLATESTEPACTION] 
INNER JOIN [dbo].[WFTEMPLATESTEP] ON [dbo].[WFTEMPLATESTEPACTION].[WFTEMPLATESTEPID] = [dbo].[WFTEMPLATESTEP].[WFTEMPLATESTEPID]
WHERE
	[dbo].[WFTEMPLATESTEP].[WFTEMPLATEID] = @PARENTID 


DELETE FROM [dbo].[WFTEMPLATESTEP]
WHERE
	[WFTEMPLATEID] = @PARENTID