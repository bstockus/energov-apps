CREATE PROCEDURE [dbo].[USP_WORKFLOW_DELETE]
(
	@WORKFLOWID CHAR(36),
	@ROWVERSION INT
)
AS
SET NOCOUNT ON;

-- Delete Workflow Action
EXEC [dbo].[USP_WORKFLOWACTION_DELETE_BYPARENTID] @WORKFLOWID

-- Delete Workflow Condition Group
EXEC [dbo].[USP_WORKFLOWCONDITIONGROUP_DELETE_BYPARENTID] @WORKFLOWID

SET NOCOUNT OFF;
DELETE FROM [dbo].[WORKFLOW]
WHERE
	[WORKFLOWID] = @WORKFLOWID AND 
	[ROWVERSION]= @ROWVERSION