CREATE PROCEDURE [dbo].[USP_WORKFLOW_UPDATE]
(
	@WORKFLOWID CHAR(36),
	@MODULEID INT,
	@WORKFLOWNAME NVARCHAR(50),
	@ROOTCLASSNAME NVARCHAR(MAX),
	@LASTCHANGEDON DATETIME,
	@LASTCHANGEDBY CHAR(36),
	@ISSERVER BIT,
	@ISCLIENT BIT,
	@WORKFLOWDESCRIPTION NVARCHAR(MAX),
	@ISENABLED BIT,
	@ISPOSTPROCESS BIT,
	@ROWVERSION INT
)
AS
DECLARE @OUTPUTTABLE as TABLE([ROWVERSION]  int)
UPDATE [dbo].[WORKFLOW] SET
	[MODULEID] = @MODULEID,
	[WORKFLOWNAME] = @WORKFLOWNAME,
	[ROOTCLASSNAME] = @ROOTCLASSNAME,
	[LASTCHANGEDON] = @LASTCHANGEDON,
	[LASTCHANGEDBY] = @LASTCHANGEDBY,
	[ISSERVER] = @ISSERVER,
	[ISCLIENT] = @ISCLIENT,
	[WORKFLOWDESCRIPTION] = @WORKFLOWDESCRIPTION,
	[ISENABLED] = @ISENABLED,
	[ISPOSTPROCESS] = @ISPOSTPROCESS,
	[ROWVERSION] = @ROWVERSION + 1
OUTPUT inserted.[ROWVERSION] INTO @OUTPUTTABLE
WHERE
	[WORKFLOWID] = @WORKFLOWID AND 
	[ROWVERSION]= @ROWVERSION

SELECT * FROM @OUTPUTTABLE