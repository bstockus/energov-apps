CREATE PROCEDURE [dbo].[USP_WORKFLOWACTIONATTACHDOC_DELETE_BYPARENTID]
(
	@WORKFLOWID CHAR(36),
	@WORKFLOWACTIONID CHAR(36)
)
AS
DELETE [dbo].[WORKFLOWACTIONATTACHDOC] 
FROM [dbo].[WORKFLOWACTIONATTACHDOC]
JOIN [dbo].[WORKFLOWACTION] ON [dbo].[WORKFLOWACTIONATTACHDOC].WORKFLOWACTIONID = [dbo].[WORKFLOWACTION].WORKFLOWACTIONID
WHERE
	([dbo].[WORKFLOWACTION].[WORKFLOWID] = @WORKFLOWID) AND
	(@WORKFLOWACTIONID IS NULL OR [dbo].[WORKFLOWACTIONATTACHDOC].WORKFLOWACTIONID = @WORKFLOWACTIONID)