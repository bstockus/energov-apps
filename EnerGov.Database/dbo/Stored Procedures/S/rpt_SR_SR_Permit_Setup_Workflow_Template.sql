
CREATE PROCEDURE [dbo].[rpt_SR_SR_Permit_Setup_Workflow_Template]
@PMPERMITTYPEID AS VARCHAR(36)
AS
SELECT PMPERMITWORKCLASS.NAME AS WorkClass, WFTEMPLATE.NAME AS WorkflowTemplate, WFSTEP.NAME AS WorkflowStep, 
       WFTEMPLATESTEP.PRIORITYORDER AS StepPriority, WFTEMPLATESTEP.SORTORDER AS StepSort, WFACTION.NAME AS WorkflowAction, 
       WFTEMPLATESTEPACTION.PRIORITYORDER AS ActionPriority, WFTEMPLATESTEPACTION.SORTORDER AS ActionSort, WFTEMPLATESTEP.AUTOFILL AS StepAutoFill,
       WFTEMPLATESTEPACTION.AUTOFILL AS ActionAutoFill, WFTEMPLATESTEPACTION.AUTORECEIVE AS ActionAutoReceive
FROM PMPERMITTYPEWORKCLASS
INNER JOIN PMPERMITWORKCLASS ON PMPERMITTYPEWORKCLASS.PMPERMITWORKCLASSID = PMPERMITWORKCLASS.PMPERMITWORKCLASSID
LEFT OUTER JOIN WFTEMPLATE ON PMPERMITTYPEWORKCLASS.WFTEMPLATEID = WFTEMPLATE.WFTEMPLATEID 
LEFT OUTER JOIN WFTEMPLATESTEP ON WFTEMPLATESTEP.WFTEMPLATEID = WFTEMPLATE.WFTEMPLATEID 
LEFT OUTER JOIN WFSTEP ON WFTEMPLATESTEP.WFSTEPID = WFSTEP.WFSTEPID
LEFT OUTER JOIN WFTEMPLATESTEPACTION ON WFTEMPLATESTEP.WFTEMPLATESTEPID = WFTEMPLATESTEPACTION.WFTEMPLATESTEPID
LEFT OUTER JOIN WFACTION ON WFTEMPLATESTEPACTION.WFACTIONID = WFACTION.WFACTIONID
WHERE PMPERMITTYPEWORKCLASS.PMPERMITTYPEID = @PMPERMITTYPEID

