

CREATE PROCEDURE [dbo].[rpt_SR_SR_Plan_Setup_Workflow_Template]
@PLPLANTYPEID AS VARCHAR(36)
AS
SELECT PLPLANWORKCLASS.NAME AS WorkClass, WFTEMPLATE.NAME AS WorkflowTemplate, WFSTEP.NAME AS WorkflowStep, 
       WFTEMPLATESTEP.PRIORITYORDER AS StepPriority, WFTEMPLATESTEP.SORTORDER AS StepSort, WFACTION.NAME AS WorkflowAction, 
       WFTEMPLATESTEPACTION.PRIORITYORDER AS ActionPriority, WFTEMPLATESTEPACTION.SORTORDER AS ActionSort, WFTEMPLATESTEP.AUTOFILL AS StepAutoFill,
       WFTEMPLATESTEPACTION.AUTOFILL AS ActionAutoFill, WFTEMPLATESTEPACTION.AUTORECEIVE AS ActionAutoReceive
FROM PLPLANTYPEWORKCLASS
INNER JOIN PLPLANWORKCLASS ON PLPLANTYPEWORKCLASS.PLPLANWORKCLASSID = PLPLANWORKCLASS.PLPLANWORKCLASSID
LEFT OUTER JOIN WFTEMPLATE ON PLPLANTYPEWORKCLASS.WFTEMPLATEID = WFTEMPLATE.WFTEMPLATEID 
LEFT OUTER JOIN WFTEMPLATESTEP ON WFTEMPLATESTEP.WFTEMPLATEID = WFTEMPLATE.WFTEMPLATEID 
LEFT OUTER JOIN WFSTEP ON WFTEMPLATESTEP.WFSTEPID = WFSTEP.WFSTEPID
LEFT OUTER JOIN WFTEMPLATESTEPACTION ON WFTEMPLATESTEP.WFTEMPLATESTEPID = WFTEMPLATESTEPACTION.WFTEMPLATESTEPID
LEFT OUTER JOIN WFACTION ON WFTEMPLATESTEPACTION.WFACTIONID = WFACTION.WFACTIONID
WHERE PLPLANTYPEWORKCLASS.PLPLANTYPEID = @PLPLANTYPEID

