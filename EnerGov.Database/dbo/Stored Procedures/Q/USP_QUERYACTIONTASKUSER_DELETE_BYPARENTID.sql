CREATE PROCEDURE [dbo].[USP_QUERYACTIONTASKUSER_DELETE_BYPARENTID]
(
	@QUERYACTIONID CHAR(36),
	@QUERYID CHAR(36),
    @QUERYACTIONTASKID CHAR(36)
)
AS
DELETE [dbo].[QUERYACTIONTASKUSER] FROM [dbo].[QUERYACTIONTASKUSER]
INNER JOIN [dbo].[QUERYACTIONTASK] ON [dbo].[QUERYACTIONTASKUSER].[QUERYACTIONTASKID] =  [dbo].[QUERYACTIONTASK].[QUERYACTIONTASKID]
INNER JOIN [dbo].[QUERYACTION] ON [dbo].[QUERYACTIONTASK].[QUERYACTIONID] = [dbo].[QUERYACTION].[QUERYACTIONID]
WHERE
    (@QUERYACTIONID IS NULL OR [dbo].[QUERYACTIONTASK].[QUERYACTIONID] = @QUERYACTIONID) 
	AND (@QUERYID IS NULL OR [dbo].[QUERYACTION].[QUERYID] = @QUERYID)
    AND (@QUERYACTIONTASKID IS NULL OR [dbo].[QUERYACTIONTASKUSER].[QUERYACTIONTASKID] = @QUERYACTIONTASKID)