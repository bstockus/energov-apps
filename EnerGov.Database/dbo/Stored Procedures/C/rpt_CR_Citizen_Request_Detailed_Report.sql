

CREATE PROCEDURE [dbo].[rpt_CR_Citizen_Request_Detailed_Report]
@REQUESTID AS VARCHAR(36)
AS
-- Main
SELECT CR.CITIZENREQUESTID, CR.REQUESTNUMBER AS RequestNumber, CR.EMERGENCY AS Emergency, CR.DESCRIPTION AS Description,
       CR.DATEFILED AS DateEntered, CR.COMPCOMPLETE AS CompleteDate, CR.COMPDEADLINE AS DeadlineDate,
       CRTYPE.NAME AS RequestType, CRSTATUS.STATUS AS Status, CRSOURCE.NAME AS Source, CRPRIORITY.NAME AS Priority,
       USERS.LNAME + ', ' + USERS.FNAME AS AssignedTo, DISTRICT.NAME AS District
FROM CITIZENREQUEST AS CR
INNER JOIN CITIZENREQUESTTYPE AS CRTYPE ON CR.CITIZENREQUESTTYPEID = CRTYPE.CITIZENREQUESTTYPEID
INNER JOIN CITIZENREQUESTSTATUS AS CRSTATUS ON CR.CITIZENREQUESTSTATUSID = CRSTATUS.CITIZENREQUESTSTATUSID
INNER JOIN CITIZENREQUESTSOURCE AS CRSOURCE ON CR.CITIZENREQUESTSOURCEID = CRSOURCE.CITIZENREQUESTSOURCEID
INNER JOIN CITIZENREQUESTPRIORITY AS CRPRIORITY ON CR.CITIZENREQUESTPRIORITYID = CRPRIORITY.CITIZENREQUESTPRIORITYID
INNER JOIN DISTRICT ON CR.DISTRICTID = DISTRICT.DISTRICTID
INNER JOIN USERS ON CR.ASSIGNEDTOUSER = USERS.SUSERGUID
WHERE CR.CITIZENREQUESTID = @REQUESTID


