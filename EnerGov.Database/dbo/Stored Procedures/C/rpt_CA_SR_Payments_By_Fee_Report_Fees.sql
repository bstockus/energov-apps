
CREATE PROCEDURE [dbo].[rpt_CA_SR_Payments_By_Fee_Report_Fees]
	@STARTDATE AS DATETIME,
	@ENDDATE AS DATETIME
AS

SET @STARTDATE = DATEADD(DAY, DATEDIFF(DAY, 0, @STARTDATE), 0)
SET @ENDDATE = DATEADD(DAY, DATEDIFF(DAY, 0, @ENDDATE), 1)

BEGIN

SELECT DISTINCT CF.FEENAME
FROM CACOMPUTEDFEE CF
INNER JOIN CATRANSACTIONFEE TF ON CF.CACOMPUTEDFEEID = TF.CACOMPUTEDFEEID
INNER JOIN CATRANSACTION T ON TF.CATRANSACTIONID = T.CATRANSACTIONID 
INNER JOIN CATRANSACTIONPAYMENT TP ON T.CATRANSACTIONID = TP.CATRANSACTIONID 
WHERE TP.PAYMENTDATE >= @STARTDATE AND TP.PAYMENTDATE < @ENDDATE

END
