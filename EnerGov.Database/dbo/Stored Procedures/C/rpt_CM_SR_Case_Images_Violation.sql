
CREATE PROCEDURE [dbo].[rpt_CM_SR_Case_Images_Violation]
@CMCODECASEID AS VARCHAR(36)
AS
SELECT CMCODE.CODENUMBER, CMCODE.DESCRIPTION AS CodeDescription, CMVIOLATION.CMVIOLATIONID,CMVIOLATION.COMPLIANCEDATE,
	   CMVIOLATION.RESOLVEDDATE, CMVIOLATION.CMCODEID, CMVIOLATION.CITATIONISSUEDATE, CMVIOLATION.CORRECTIVEACTION, 
	   CMVIOLATION.CMVIOLATIONSTATUSID, CMVIOLATIONSTATUS.NAME AS VIOLATIONSTATUS, CMCODEWFSTEP.CMCODECASEID

FROM CMCODEWFSTEP 
INNER JOIN CMCODEWFACTIONSTEP ON CMCODEWFSTEP.CMCODEWFSTEPID = CMCODEWFACTIONSTEP.CMCODEWFSTEPID
INNER JOIN CMVIOLATION ON CMVIOLATION.CMCODEWFACTIONID = CMCODEWFACTIONSTEP.CMCODEWFACTIONSTEPID
INNER JOIN CMVIOLATIONSTATUS ON CMVIOLATIONSTATUS.CMVIOLATIONSTATUSID = CMVIOLATION.CMVIOLATIONSTATUSID
INNER JOIN CMCODE ON CMCODEWFACTIONSTEP.CMCODEID = CMCODE.CMCODEID
WHERE CMCODEWFSTEP.CMCODECASEID = @CMCODECASEID

