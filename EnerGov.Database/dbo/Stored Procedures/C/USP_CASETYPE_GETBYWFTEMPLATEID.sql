CREATE PROCEDURE [dbo].[USP_CASETYPE_GETBYWFTEMPLATEID]  
(  
 @WFTEMPLATEID AS CHAR(36)  
)  
AS  
BEGIN  
SET NOCOUNT ON;  
SELECT * FROM  
(  
   --Permit Management  
    SELECT 1 AS WFENTITYID, [dbo].[PMPERMITTYPE].[PMPERMITTYPEID] AS TYPEID, [dbo].[PMPERMITTYPE].[NAME] AS TYPENAME,  
     [dbo].[PMPERMITWORKCLASS].[NAME] AS WORKCLASSNAME,
	   (SELECT NAME FROM [dbo].[WFENTITY] WHERE [dbo].[WFENTITY].[WFENTITYID] = 1) AS MODULENAME    
     FROM [dbo].[PMPERMITTYPE]  
     JOIN [dbo].[PMPERMITTYPEWORKCLASS] ON [dbo].[PMPERMITTYPE].[PMPERMITTYPEID] = [dbo].[PMPERMITTYPEWORKCLASS].[PMPERMITTYPEID]  
     JOIN [dbo].[PMPERMITWORKCLASS] ON [dbo].[PMPERMITWORKCLASS].[PMPERMITWORKCLASSID] = [dbo].[PMPERMITTYPEWORKCLASS].[PMPERMITWORKCLASSID]  
    WHERE [dbo].[PMPERMITTYPEWORKCLASS].[WFTEMPLATEID] = @WFTEMPLATEID  
     
   UNION ALL -- Plan Management  
    SELECT 2 AS WFENTITYID, [dbo].[PLPLANTYPE].[PLPLANTYPEID] AS TYPEID, [dbo].[PLPLANTYPE].[PLANNAME] AS TYPENAME, [dbo].[PLPLANWORKCLASS].[NAME] AS WORKCLASSNAME,
	 (SELECT NAME FROM [dbo].[WFENTITY] WHERE [dbo].[WFENTITY].[WFENTITYID] = 2) AS MODULENAME      
    FROM [dbo].[PLPLANTYPE]  
     JOIN [dbo].[PLPLANTYPEWORKCLASS] ON [dbo].[PLPLANTYPE].[PLPLANTYPEID] = [dbo].[PLPLANTYPEWORKCLASS].[PLPLANTYPEID]  
     JOIN  [dbo].[PLPLANWORKCLASS] ON [dbo].[PLPLANWORKCLASS].[PLPLANWORKCLASSID] = [dbo].[PLPLANTYPEWORKCLASS].[PLPLANWORKCLASSID]  
    WHERE [dbo].[PLPLANTYPEWORKCLASS].[WFTEMPLATEID] = @WFTEMPLATEID  
     
   UNION ALL --Code Management   
    SELECT 4 AS WFENTITYID, [dbo].[CMCASETYPE].CMCASETYPEID AS TYPEID, [dbo].[CMCASETYPE].[NAME] AS TYPENAME, '' AS WORKCLASSNAME,
	 (SELECT NAME FROM [dbo].[WFENTITY] WHERE [dbo].[WFENTITY].[WFENTITYID] = 4) AS MODULENAME     
    FROM [dbo].[CMCASETYPE]  
    WHERE [dbo].[CMCASETYPE].[WFTEMPLATEID] = @WFTEMPLATEID  
     
   UNION ALL -- Business License   
    SELECT 5 AS WFENTITYID, BLLICENSETYPE.BLLICENSETYPEID AS TYPEID, [dbo].[BLLICENSETYPE].[NAME] AS TYPENAME, [dbo].[BLLICENSECLASS].[NAME] AS WORKCLASSNAME,
	 (SELECT NAME FROM [dbo].[WFENTITY] WHERE [dbo].[WFENTITY].[WFENTITYID] = 5) AS MODULENAME      
    FROM [dbo].[BLLICENSETYPE]  
     JOIN [dbo].[BLLICENSETYPECLASS] ON [dbo].[BLLICENSETYPE].[BLLICENSETYPEID] = [dbo].[BLLICENSETYPECLASS].[BLLICENSETYPEID]  
     JOIN  [dbo].[BLLICENSECLASS] ON [dbo].[BLLICENSECLASS].[BLLICENSECLASSID] = [dbo].[BLLICENSETYPECLASS].[BLLICENSECLASSID]  
    WHERE [dbo].[BLLICENSETYPECLASS].[WFTEMPLATEID] = @WFTEMPLATEID  
     
   UNION ALL -- Professional License   
    SELECT 7 AS WFENTITYID, [dbo].[ILLICENSETYPE].[ILLICENSETYPEID] AS TYPEID, [dbo].[ILLICENSETYPE].[NAME] AS TYPENAME, [dbo].[ILLICENSECLASSIFICATION].[NAME] AS WORKCLASSNAME,
	 (SELECT NAME FROM [dbo].[WFENTITY] WHERE [dbo].[WFENTITY].[WFENTITYID] = 7) AS MODULENAME      
       FROM [dbo].[ILLICENSETYPE]  
     JOIN [dbo].[ILLICENSETYPELICENSECLASS] ON [dbo].[ILLICENSETYPE].[ILLICENSETYPEID] = [dbo].[ILLICENSETYPELICENSECLASS].[ILLICENSETYPEID]  
     JOIN  [dbo].[ILLICENSECLASSIFICATION] ON [dbo].[ILLICENSECLASSIFICATION].[ILLICENSECLASSIFICATIONID] = [dbo].[ILLICENSETYPELICENSECLASS].[ILLICENSECLASSIFICATIONID]  
    WHERE [dbo].[ILLICENSETYPELICENSECLASS].[WFTEMPLATEID] = @WFTEMPLATEID  ) AS WORKFLOWTEMPLATECASETYPES  
   ORDER BY WORKFLOWTEMPLATECASETYPES.MODULENAME,WORKFLOWTEMPLATECASETYPES.TYPENAME,WORKFLOWTEMPLATECASETYPES.WORKCLASSNAME 
  
END