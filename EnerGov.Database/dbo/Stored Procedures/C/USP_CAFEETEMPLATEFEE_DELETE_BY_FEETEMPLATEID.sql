CREATE PROCEDURE [dbo].[USP_CAFEETEMPLATEFEE_DELETE_BY_FEETEMPLATEID]
(
@CAFEETEMPLATEID CHAR(36)
)
AS

DECLARE @EXPRESSIONIDS RECORDIDS
DECLARE @CONDITIONGROUPIDS RECORDIDS

INSERT	INTO @EXPRESSIONIDS(RECORDID)
SELECT	[dbo].[CAFEETEMPLATEFEE].[CAEXPRESSIONID] FROM [dbo].[CAFEETEMPLATEFEE]
WHERE	[dbo].[CAFEETEMPLATEFEE].[CAFEETEMPLATEID] = @CAFEETEMPLATEID

INSERT	INTO @CONDITIONGROUPIDS(RECORDID)
SELECT	[dbo].[CAFEETEMPLATEFEE].[CACONDITIONGROUPID] FROM [dbo].[CAFEETEMPLATEFEE]
WHERE	[dbo].[CAFEETEMPLATEFEE].[CAFEETEMPLATEID] = @CAFEETEMPLATEID

DELETE FROM [dbo].[CAFEETEMPLATEFEE]
WHERE	[CAFEETEMPLATEID] = @CAFEETEMPLATEID

EXEC [dbo].[USP_CAEXPRESSION_DELETE_BY_IDS] @EXPRESSIONIDS
EXEC [dbo].[USP_CACONDITIONGROUP_DELETE_BY_IDS] @CONDITIONGROUPIDS