CREATE PROCEDURE [dbo].[GETCASEADDRESSLIST]
-- Add the parameters for the stored procedure here
@CaseID char(36),
@ModuleID int
AS
BEGIN	
	IF @ModuleID = 1
	BEGIN
		SELECT	DISTINCT PLPLANADDRESS.PLPLANADDRESSID AS CASEADDRESSID,
				PLPLANADDRESS.MAIN,
				MAILINGADDRESS.ADDRESSLINE1,	
				MAILINGADDRESS.ADDRESSLINE2,	
				MAILINGADDRESS.ADDRESSLINE3,	
				MAILINGADDRESS.POSTDIRECTION,	
				MAILINGADDRESS.PREDIRECTION,	
				MAILINGADDRESS.STREETTYPE,	
				MAILINGADDRESS.PARCELNUMBER,
				MAILINGADDRESS.ADDRESSTYPE,
				MAILINGADDRESS.UNITORSUITE,
				MAILINGADDRESS.CITY,
				MAILINGADDRESS.STATE,
				MAILINGADDRESS.COUNTRY,
				MAILINGADDRESS.POSTALCODE,
				MAILINGADDRESS.PARCELNUMBER
		FROM	PLPLANADDRESS
		INNER JOIN MAILINGADDRESS ON MAILINGADDRESS.MAILINGADDRESSID = PLPLANADDRESS.MAILINGADDRESSID	
		WHERE PLPLANADDRESS.PLPLANID = @CaseID				
	END
	ELSE IF @ModuleID = 2
	BEGIN
		SELECT	DISTINCT PMPERMITADDRESS.PMPERMITADDRESSID AS CASEADDRESSID,
				PMPERMITADDRESS.MAIN,
				MAILINGADDRESS.ADDRESSLINE1,	
				MAILINGADDRESS.ADDRESSLINE2,	
				MAILINGADDRESS.ADDRESSLINE3,	
				MAILINGADDRESS.POSTDIRECTION,	
				MAILINGADDRESS.PREDIRECTION,	
				MAILINGADDRESS.STREETTYPE,	
				MAILINGADDRESS.PARCELNUMBER,
				MAILINGADDRESS.ADDRESSTYPE,
				MAILINGADDRESS.UNITORSUITE,
				MAILINGADDRESS.CITY,
				MAILINGADDRESS.STATE,
				MAILINGADDRESS.COUNTRY,
				MAILINGADDRESS.POSTALCODE,
				MAILINGADDRESS.PARCELNUMBER
		FROM	PMPERMITADDRESS
		INNER JOIN MAILINGADDRESS ON MAILINGADDRESS.MAILINGADDRESSID = PMPERMITADDRESS.MAILINGADDRESSID	
		WHERE PMPERMITADDRESS.PMPERMITID = @CaseID
	END
END