CREATE PROCEDURE [dbo].[GETCASECONDITIONLIST]
-- Add the parameters for the stored procedure here
@CaseID char(36),
@ModuleID int
AS
BEGIN	
	IF @ModuleID = 1
	BEGIN
		SELECT	DISTINCT PLPLANCONDITION.PLPLANCONDITIONID AS CASECONDITIONID,
				PLPLANCONDITION.CONDITIONID,	
				PLPLANCONDITION.PLANID AS CASEID,	
				PLPLANCONDITION.ISSATISFIED,	
				PLPLANCONDITION.SCOPE,
				PLPLANCONDITION.CREATEDON,
				1 AS MODULEID			
		FROM	PLPLANCONDITION	
		WHERE PLPLANCONDITION.PLANID = @CaseID	
		ORDER BY CREATEDON DESC			
	END
	ELSE IF @ModuleID = 2
	BEGIN
		SELECT	DISTINCT PMPERMITCONDITION.PMPERMITCONDITIONID AS CASECONDITIONID,
				PMPERMITCONDITION.CONDITIONID,	
				PMPERMITCONDITION.PMPERMITID AS CASEID,	
				PMPERMITCONDITION.ISSATISFIED,	
				PMPERMITCONDITION.SCOPE,
				PMPERMITCONDITION.CREATEDON,
				2 AS MODULEID			
		FROM	PMPERMITCONDITION	
		WHERE PMPERMITCONDITION.PMPERMITID = @CaseID	
		ORDER BY CREATEDON DESC	
	END
END