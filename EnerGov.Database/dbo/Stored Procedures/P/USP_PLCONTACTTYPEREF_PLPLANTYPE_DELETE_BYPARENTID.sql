CREATE PROCEDURE [dbo].[USP_PLCONTACTTYPEREF_PLPLANTYPE_DELETE_BYPARENTID]  
(  
@PLANTYPEID CHAR(36),
@PLANTYPEWORKCLASSID CHAR(36)
)  
AS  
DELETE [dbo].[PLCONTACTTYPEREF] FROM [dbo].[PLCONTACTTYPEREF]
INNER JOIN [dbo].[PLPLANTYPEWORKCLASS] ON [dbo].[PLCONTACTTYPEREF].[OBJTYPEID] = [dbo].[PLPLANTYPEWORKCLASS].[PLPLANTYPEWORKCLASSID]
WHERE
	[dbo].[PLPLANTYPEWORKCLASS].[PLPLANTYPEID] = @PLANTYPEID AND (@PLANTYPEWORKCLASSID IS NULL OR [dbo].[PLCONTACTTYPEREF].[OBJTYPEID] = @PLANTYPEWORKCLASSID)