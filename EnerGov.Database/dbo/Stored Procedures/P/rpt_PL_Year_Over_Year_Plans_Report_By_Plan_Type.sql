
CREATE PROCEDURE [dbo].[rpt_PL_Year_Over_Year_Plans_Report_By_Plan_Type]
@YEAR AS INT
AS

SELECT PLPLAN.PLANNUMBER AS PlanNumber, PLPLANTYPE.PLANNAME AS PlanType, PLPLAN.VALUE AS Valuation, PLPLAN.APPLICATIONDATE AS ApplyDate, 
       PLPLAN.SQUAREFEET AS SquareFeet, PLPLAN.EXPIREDATE AS ExpireDate, PLPLAN.COMPLETEDATE AS CompleteDate,
--	   (SELECT R.[IMAGE] FROM RPTIMAGELIB R
--	    WHERE R.IMAGENAME = 'Municipality_Logo') LOGO,
	   (SELECT CASE WHEN R.[IMAGE] IS NULL THEN 'N' ELSE 'Y' END FROM RPTIMAGELIB R
		WHERE R.IMAGENAME = 'Municipality_Logo') SHOWLOGO,
	   (SELECT R.REPORTTEXT FROM RPTTEXTLIB R
		WHERE R.TEXTNAME = 'Municipality_Name') Municipality_Name,	   
	   (SELECT R.REPORTTEXT FROM RPTTEXTLIB R
		WHERE R.TEXTNAME = 'Municipality_Page_Footer') Municipality_Page_Footer

FROM PLPLAN 
INNER JOIN PLPLANTYPE ON PLPLAN.PLPLANTYPEID = PLPLANTYPE.PLPLANTYPEID

