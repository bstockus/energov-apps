

CREATE PROCEDURE [dbo].[rpt_PR_SR_Project_Detail_Report]
@PRPROJECTID AS VARCHAR(36)
AS
SELECT	PRPROJECT.NAME AS ProjectName, PRPROJECTTYPE.NAME AS ProjectType, DISTRICT.NAME AS District, PRPROJECT.PROJECTNUMBER AS ProjectNumber, 
        PRPROJECT.STARTDATE AS StartDate, PRPROJECT.EXPECTEDENDDATE AS ExpectedEndDate, PRPROJECT.COMPLETEDATE AS CompleteDate, 
        PRPROJECT.COMPLETE AS Complete, PRPROJECT.DESCRIPTION AS Description, PRPROJECTSTATUS.NAME AS ProjectStatus, PRPROJECT.PRPROJECTID,
		(SELECT R.[IMAGE] FROM RPTIMAGELIB R
		WHERE R.IMAGENAME = 'Municipality_Logo') LOGO,
	   (SELECT CASE WHEN R.[IMAGE] IS NULL THEN 'N' ELSE 'Y' END FROM RPTIMAGELIB R
		WHERE R.IMAGENAME = 'Municipality_Logo') SHOWLOGO,
	   (SELECT R.REPORTTEXT FROM RPTTEXTLIB R
		WHERE R.TEXTNAME = 'Municipality_Name') Municipality_Name,	   
	   (SELECT R.REPORTTEXT FROM RPTTEXTLIB R
		WHERE R.TEXTNAME = 'Municipality_Page_Footer') Municipality_Page_Footer

FROM PRPROJECT 
INNER JOIN PRPROJECTSTATUS ON PRPROJECT.PRPROJECTSTATUSID = PRPROJECTSTATUS.PRPROJECTSTATUSID 
INNER JOIN PRPROJECTTYPE ON PRPROJECT.PRPROJECTTYPEID = PRPROJECTTYPE.PRPROJECTTYPEID 
INNER JOIN DISTRICT ON PRPROJECT.DISTRICTID = DISTRICT.DISTRICTID
WHERE PRPROJECT.PRPROJECTID = @PRPROJECTID
