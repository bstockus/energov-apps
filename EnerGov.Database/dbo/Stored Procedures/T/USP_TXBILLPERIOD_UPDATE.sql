CREATE PROCEDURE [dbo].[USP_TXBILLPERIOD_UPDATE]
(
	@BILLPERIODID CHAR(36),
	@YEAR INT,
	@PERIODNAME NVARCHAR(50),
	@STARTDATE DATETIME,
	@ENDDATE DATETIME,
	@DUEDATE DATETIME,
	@DEFAULTGENERATEDDATE DATETIME,
	@RPTPERIODREF CHAR(36),
	@LATEDATE DATETIME,
	@COMPOUNDINGINTERESTSTARTDATE DATETIME,
	@LASTCHANGEDBY CHAR(36),
	@LASTCHANGEDON DATETIME,
	@ROWVERSION INT
)
AS
DECLARE @OUTPUTTABLE as TABLE([ROWVERSION]  int)
UPDATE [dbo].[TXBILLPERIOD] SET
	[YEAR] = @YEAR,
	[PERIODNAME] = @PERIODNAME,
	[STARTDATE] = @STARTDATE,
	[ENDDATE] = @ENDDATE,
	[DUEDATE] = @DUEDATE,
	[DEFAULTGENERATEDDATE] = @DEFAULTGENERATEDDATE,
	[RPTPERIODREF] = @RPTPERIODREF,
	[LATEDATE] = @LATEDATE,
	[COMPOUNDINGINTERESTSTARTDATE] = @COMPOUNDINGINTERESTSTARTDATE,
	[LASTCHANGEDBY] = @LASTCHANGEDBY,
	[LASTCHANGEDON] = @LASTCHANGEDON,
	[ROWVERSION] = @ROWVERSION + 1
OUTPUT inserted.[ROWVERSION] INTO @OUTPUTTABLE
WHERE
	[BILLPERIODID] = @BILLPERIODID AND 
	[ROWVERSION]= @ROWVERSION

SELECT * FROM @OUTPUTTABLE