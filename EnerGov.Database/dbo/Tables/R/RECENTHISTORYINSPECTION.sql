CREATE TABLE [dbo].[RECENTHISTORYINSPECTION] (
    [RECENTHISTORYINSPECTIONID] CHAR (36)     NOT NULL,
    [INSPECTIONID]              CHAR (36)     NOT NULL,
    [LOGGEDDATETIME]            DATETIME      NOT NULL,
    [USERID]                    CHAR (36)     NOT NULL,
    [INSPECTIONNUMBER]          NVARCHAR (50) NOT NULL,
    CONSTRAINT [PK_RECENTHISTORYINSPECTION] PRIMARY KEY CLUSTERED ([RECENTHISTORYINSPECTIONID] ASC),
    CONSTRAINT [FK_RECENTHISTORYINSPECTION_USER] FOREIGN KEY ([USERID]) REFERENCES [dbo].[USERS] ([SUSERGUID])
);


GO
CREATE NONCLUSTERED INDEX [IX_RECENTHISTORYINSPECTION_ALL]
    ON [dbo].[RECENTHISTORYINSPECTION]([USERID] ASC, [INSPECTIONNUMBER] DESC, [INSPECTIONID] ASC);


GO
CREATE NONCLUSTERED INDEX [IX_RECENTHISTORYINSPECTION_LOOKUP]
    ON [dbo].[RECENTHISTORYINSPECTION]([INSPECTIONID] ASC, [USERID] ASC, [INSPECTIONNUMBER] DESC);


GO
CREATE NONCLUSTERED INDEX [IX_RECENTHISTORYPERMIT_QUERY]
    ON [dbo].[RECENTHISTORYINSPECTION]([USERID] ASC)
    INCLUDE([INSPECTIONID], [LOGGEDDATETIME]);

