CREATE TABLE [dbo].[RECORDCHANGETRACKQUEUE] (
    [RECORDCHANGETRACKID] BIGINT    IDENTITY (1, 1) NOT NULL,
    [RECORDID]            CHAR (36) NOT NULL,
    [RECORDSOURCEID]      INT       NOT NULL,
    [CREATEDATE]          DATETIME  NOT NULL,
    [PROCESSEDDATE]       DATETIME  NULL,
    [RECORDSTATUSID]      INT       NOT NULL,
    [RECORDACTIONID]      INT       NOT NULL,
    CONSTRAINT [PK_RECORDCHANGETRACKQUEUE] PRIMARY KEY CLUSTERED ([RECORDCHANGETRACKID] ASC),
    CONSTRAINT [FK_RECORDCHANGETRACKQUEUE_RECORDACTION] FOREIGN KEY ([RECORDACTIONID]) REFERENCES [dbo].[RECORDACTION] ([RECORDACTIONID]),
    CONSTRAINT [FK_RECORDCHANGETRACKQUEUE_RECORDSOURCE] FOREIGN KEY ([RECORDSOURCEID]) REFERENCES [dbo].[RECORDSOURCE] ([RECORDSOURCEID]),
    CONSTRAINT [FK_RECORDCHANGETRACKQUEUE_RECORDSTATUS] FOREIGN KEY ([RECORDSTATUSID]) REFERENCES [dbo].[RECORDSTATUS] ([RECORDSTATUSID])
);


GO
CREATE NONCLUSTERED INDEX [IX_RECORDCHANGETRACKQUEUE_RECORDSTATUSID]
    ON [dbo].[RECORDCHANGETRACKQUEUE]([RECORDSTATUSID] ASC);


GO
CREATE NONCLUSTERED INDEX [IX_RECORDCHANGETRACKQUEUE_DATES]
    ON [dbo].[RECORDCHANGETRACKQUEUE]([PROCESSEDDATE] ASC, [CREATEDATE] ASC);


GO
CREATE NONCLUSTERED INDEX [IX_RECORDCHANGETRACKQUEUE_PROCESSDATE]
    ON [dbo].[RECORDCHANGETRACKQUEUE]([PROCESSEDDATE] ASC);


GO
CREATE NONCLUSTERED INDEX [IX_RECORDCHANGETRACKQUEUE_RECORDACTIONID_RECORDID]
    ON [dbo].[RECORDCHANGETRACKQUEUE]([RECORDACTIONID] ASC)
    INCLUDE([RECORDID]);


GO
CREATE NONCLUSTERED INDEX [IX_RECORDCHANGETRACKQUEUE_RECORDSOURCEID]
    ON [dbo].[RECORDCHANGETRACKQUEUE]([RECORDSOURCEID] ASC);

