CREATE TABLE [dbo].[RECENTHISTORYPERMIT] (
    [RECENTHISTORYPERMITID] CHAR (36)     NOT NULL,
    [PERMITID]              CHAR (36)     NOT NULL,
    [LOGGEDDATETIME]        DATETIME      NOT NULL,
    [USERID]                CHAR (36)     NOT NULL,
    [PERMITNUMBER]          NVARCHAR (50) NOT NULL,
    CONSTRAINT [PK_RECENTHISTORYPERMIT] PRIMARY KEY CLUSTERED ([RECENTHISTORYPERMITID] ASC),
    CONSTRAINT [FK_RECENTHISTORYPERMIT_USER] FOREIGN KEY ([USERID]) REFERENCES [dbo].[USERS] ([SUSERGUID])
);


GO
CREATE NONCLUSTERED INDEX [IX_RECENTHISTORYPERMIT_ALL]
    ON [dbo].[RECENTHISTORYPERMIT]([USERID] ASC, [PERMITNUMBER] DESC, [PERMITID] ASC);


GO
CREATE NONCLUSTERED INDEX [IX_RECENTHISTORYPERMIT_LOOKUP]
    ON [dbo].[RECENTHISTORYPERMIT]([PERMITID] ASC, [USERID] ASC, [PERMITNUMBER] DESC);


GO
CREATE NONCLUSTERED INDEX [IX_RECENTHISTORYPERMIT_QUERY]
    ON [dbo].[RECENTHISTORYPERMIT]([USERID] ASC)
    INCLUDE([PERMITID], [LOGGEDDATETIME]);

