CREATE TABLE [dbo].[RECENTHISTORYPLAN] (
    [RECENTHISTORYPLANID] CHAR (36)     NOT NULL,
    [PLANID]              CHAR (36)     NOT NULL,
    [LOGGEDDATETIME]      DATETIME      NOT NULL,
    [USERID]              CHAR (36)     NOT NULL,
    [PLANNUMBER]          NVARCHAR (50) NOT NULL,
    CONSTRAINT [PK_RECENTHISTORYPLAN] PRIMARY KEY CLUSTERED ([RECENTHISTORYPLANID] ASC),
    CONSTRAINT [FK_RECENTHISTORYPLAN_USER] FOREIGN KEY ([USERID]) REFERENCES [dbo].[USERS] ([SUSERGUID])
);


GO
CREATE NONCLUSTERED INDEX [IX_RECENTHISTORYPLAN_ALL]
    ON [dbo].[RECENTHISTORYPLAN]([USERID] ASC, [PLANNUMBER] DESC, [PLANID] ASC);


GO
CREATE NONCLUSTERED INDEX [IX_RECENTHISTORYPLAN_LOOKUP]
    ON [dbo].[RECENTHISTORYPLAN]([PLANID] ASC, [USERID] ASC, [PLANNUMBER] DESC);


GO
CREATE NONCLUSTERED INDEX [IX_RECENTHISTORYPLAN_QUERY]
    ON [dbo].[RECENTHISTORYPLAN]([USERID] ASC)
    INCLUDE([PLANID], [LOGGEDDATETIME]);

