CREATE TABLE [dbo].[RECENTHISTORYBUSINESS] (
    [RECENTHISTORYBUSINESSID]   CHAR (36)      NOT NULL,
    [BLGLOBALENTITYEXTENSIONID] CHAR (36)      NOT NULL,
    [LOGGEDDATETIME]            DATETIME       NOT NULL,
    [USERID]                    CHAR (36)      NOT NULL,
    [COMPANYNAME]               NVARCHAR (200) NULL,
    CONSTRAINT [PK_RECENTHISTORYBUSINESS] PRIMARY KEY CLUSTERED ([RECENTHISTORYBUSINESSID] ASC),
    CONSTRAINT [FK_RECENTHISTORYBUSINESS_USERS] FOREIGN KEY ([USERID]) REFERENCES [dbo].[USERS] ([SUSERGUID])
);


GO
CREATE NONCLUSTERED INDEX [IX_RECENTHISTORYBUSINESS_QUERY]
    ON [dbo].[RECENTHISTORYBUSINESS]([USERID] ASC)
    INCLUDE([BLGLOBALENTITYEXTENSIONID], [LOGGEDDATETIME]);


GO
CREATE NONCLUSTERED INDEX [IX_RECENTHISTORYBUSINESS_ALL]
    ON [dbo].[RECENTHISTORYBUSINESS]([USERID] ASC, [COMPANYNAME] DESC, [BLGLOBALENTITYEXTENSIONID] ASC);


GO
CREATE NONCLUSTERED INDEX [IX_RECENTHISTORYBUSINESS_LOOKUP]
    ON [dbo].[RECENTHISTORYBUSINESS]([BLGLOBALENTITYEXTENSIONID] ASC, [USERID] ASC, [COMPANYNAME] DESC);

