CREATE TABLE [dbo].[TRANSACTIONEVENTQUEUE] (
    [TRANSACTIONEVENTQUEUEID] BIGINT        IDENTITY (1, 1) NOT NULL,
    [CATRANSACTIONID]         CHAR (36)     NOT NULL,
    [RECEIPTNUMBER]           NVARCHAR (50) NOT NULL,
    [TRANSACTIONEVENTTYPEID]  INT           NOT NULL,
    [EVENTSTATUSID]           INT           NOT NULL,
    [CREATEDDATE]             DATETIME      NOT NULL,
    [PROCESSEDDATE]           DATETIME      NULL,
    [LASTCHANGEDBY]           CHAR (36)     NULL,
    CONSTRAINT [PK_TRANSACTIONEVENTQUEUE] PRIMARY KEY CLUSTERED ([TRANSACTIONEVENTQUEUEID] ASC),
    CONSTRAINT [FK_TRANSACTIONEVENTQUEUE_EVENTSTATUS] FOREIGN KEY ([EVENTSTATUSID]) REFERENCES [dbo].[EVENTSTATUS] ([EVENTSTATUSID]),
    CONSTRAINT [FK_TRANSACTIONEVENTQUEUE_TRANSACTIONEVENTTYPE] FOREIGN KEY ([TRANSACTIONEVENTTYPEID]) REFERENCES [dbo].[TRANSACTIONEVENTTYPE] ([TRANSACTIONEVENTTYPEID]),
    CONSTRAINT [FK_TRANSACTIONEVENTQUEUE_USERS] FOREIGN KEY ([LASTCHANGEDBY]) REFERENCES [dbo].[USERS] ([SUSERGUID])
);


GO
CREATE NONCLUSTERED INDEX [TRANSACTIONEVENTQUEUE_PROCESSEDDATE]
    ON [dbo].[TRANSACTIONEVENTQUEUE]([PROCESSEDDATE] ASC);


GO
CREATE NONCLUSTERED INDEX [IX_TRANSACTIONEVENTQUEUE_CREATEDDATE]
    ON [dbo].[TRANSACTIONEVENTQUEUE]([CREATEDDATE] ASC);

