CREATE TABLE [dbo].[INSTOREITEM] (
    [INSTOREITEMID]       CHAR (36)       NOT NULL,
    [ITEMID]              CHAR (36)       NOT NULL,
    [INSTOREID]           CHAR (36)       NOT NULL,
    [ORDERPOINT]          INT             NOT NULL,
    [UNITCOST]            MONEY           NULL,
    [INSTOREITEMSTATUSID] CHAR (36)       NOT NULL,
    [LASTCHANGEDON]       DATETIME        NULL,
    [LASTCHANGEDBY]       CHAR (36)       NULL,
    [ROWVERSION]          INT             NOT NULL,
    [UNITOFMEASUREID]     CHAR (36)       NOT NULL,
    [TOTALQUANTITY]       DECIMAL (38, 5) CONSTRAINT [DF_INStoreItem_TotalQuantity] DEFAULT ((0)) NOT NULL,
    [ONHANDQUANTITY]      DECIMAL (38, 5) NOT NULL,
    [AVAILABLEQUANTITY]   DECIMAL (38, 5) CONSTRAINT [DF_INStoreItem_AvailableQuantity] DEFAULT ((0)) NOT NULL,
    [ONREQUESTQUANTITY]   DECIMAL (38, 5) CONSTRAINT [DF_INStoreItem_OnRequestQuantity] DEFAULT ((0)) NOT NULL,
    [CAPACITY]            DECIMAL (38, 5) NULL,
    CONSTRAINT [PK_INStoreItem] PRIMARY KEY CLUSTERED ([INSTOREITEMID] ASC) WITH (FILLFACTOR = 90),
    CONSTRAINT [FK_INStoreItem_INStore] FOREIGN KEY ([INSTOREID]) REFERENCES [dbo].[INSTORE] ([INSTOREID]),
    CONSTRAINT [FK_INStoreItem_INStoreItemStat] FOREIGN KEY ([INSTOREITEMSTATUSID]) REFERENCES [dbo].[INSTOREITEMSTATUS] ([INSTOREITEMSTATUSID]),
    CONSTRAINT [FK_INStoreItem_Item] FOREIGN KEY ([ITEMID]) REFERENCES [dbo].[ITEM] ([ITEMID]),
    CONSTRAINT [FK_INStoreItem_UnitOfMeasure] FOREIGN KEY ([UNITOFMEASUREID]) REFERENCES [dbo].[UNITOFMEASURE] ([UNITOFMEASUREID]),
    CONSTRAINT [FK_INStoreItem_Users] FOREIGN KEY ([LASTCHANGEDBY]) REFERENCES [dbo].[USERS] ([SUSERGUID])
);


GO
CREATE UNIQUE NONCLUSTERED INDEX [UX_INStoreItem]
    ON [dbo].[INSTOREITEM]([ITEMID] ASC, [INSTOREID] ASC) WITH (FILLFACTOR = 90);

