CREATE TABLE [dbo].[IMVIOLATION] (
    [IMVIOLATIONID]             CHAR (36)      NOT NULL,
    [CMCODEREVISIONID]          CHAR (36)      NOT NULL,
    [CMCODEID]                  CHAR (36)      NOT NULL,
    [COMPLIANCEDATE]            DATETIME       NULL,
    [CITATIONISSUEDATE]         DATETIME       NULL,
    [CMVIOLATIONSTATUSID]       CHAR (36)      NOT NULL,
    [RESOLVEDDATE]              DATETIME       NULL,
    [CMCODECATEGORYID]          CHAR (36)      NULL,
    [CMCODEVIOLATIONPRIORITYID] CHAR (36)      NULL,
    [CORRECTIVEACTION]          NVARCHAR (MAX) NULL,
    [CREATEDON]                 DATETIME       NOT NULL,
    [CREATEDBY]                 CHAR (36)      NOT NULL,
    [LASTCHANGEDON]             DATETIME       NOT NULL,
    [LASTCHANGEDBY]             CHAR (36)      NOT NULL,
    PRIMARY KEY CLUSTERED ([IMVIOLATIONID] ASC),
    CONSTRAINT [FK_IMViolation_CMCode] FOREIGN KEY ([CMCODEID]) REFERENCES [dbo].[CMCODE] ([CMCODEID]),
    CONSTRAINT [FK_IMViolation_CMCodeCategory] FOREIGN KEY ([CMCODECATEGORYID]) REFERENCES [dbo].[CMCODECATEGORY] ([CMCODECATEGORYID]),
    CONSTRAINT [FK_IMViolation_CMRevision] FOREIGN KEY ([CMCODEREVISIONID]) REFERENCES [dbo].[CMCODEREVISION] ([CMCODEREVISIONID]),
    CONSTRAINT [FK_IMViolation_Priority] FOREIGN KEY ([CMCODEVIOLATIONPRIORITYID]) REFERENCES [dbo].[CMCODEVIOLATIONPRIORITY] ([CMCODEVIOLATIONPRIORITYID]),
    CONSTRAINT [FK_IMViolation_Status] FOREIGN KEY ([CMVIOLATIONSTATUSID]) REFERENCES [dbo].[CMVIOLATIONSTATUS] ([CMVIOLATIONSTATUSID]),
    CONSTRAINT [FK_IMVIOLATION_USERS_CHANGEDBY] FOREIGN KEY ([LASTCHANGEDBY]) REFERENCES [dbo].[USERS] ([SUSERGUID]),
    CONSTRAINT [FK_IMVIOLATION_USERS_CREATEDBY] FOREIGN KEY ([CREATEDBY]) REFERENCES [dbo].[USERS] ([SUSERGUID])
);

