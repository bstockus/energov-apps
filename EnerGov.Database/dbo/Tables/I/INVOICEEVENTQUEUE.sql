CREATE TABLE [dbo].[INVOICEEVENTQUEUE] (
    [INVOICEEVENTQUEUEID] BIGINT         IDENTITY (1, 1) NOT NULL,
    [CAINVOICEID]         CHAR (36)      NOT NULL,
    [INVOICENUMBER]       NVARCHAR (500) NOT NULL,
    [INVOICEEVENTTYPEID]  INT            NOT NULL,
    [EVENTSTATUSID]       INT            NOT NULL,
    [CREATEDDATE]         DATETIME       NOT NULL,
    [PROCESSEDDATE]       DATETIME       NULL,
    [LASTCHANGEDBY]       CHAR (36)      NULL,
    CONSTRAINT [PK_INVOICEEVENTQUEUE] PRIMARY KEY CLUSTERED ([INVOICEEVENTQUEUEID] ASC),
    CONSTRAINT [FK_INVOICEEVENTQUEUE_EVENTSTATUS] FOREIGN KEY ([EVENTSTATUSID]) REFERENCES [dbo].[EVENTSTATUS] ([EVENTSTATUSID]),
    CONSTRAINT [FK_INVOICEEVENTQUEUE_INVOICEEVENTTYPE] FOREIGN KEY ([INVOICEEVENTTYPEID]) REFERENCES [dbo].[INVOICEEVENTTYPE] ([INVOICEEVENTTYPEID]),
    CONSTRAINT [FK_INVOICEEVENTQUEUE_USERS] FOREIGN KEY ([LASTCHANGEDBY]) REFERENCES [dbo].[USERS] ([SUSERGUID])
);


GO
CREATE NONCLUSTERED INDEX [INVOICEEVENTQUEUE_PROCESSEDDATE]
    ON [dbo].[INVOICEEVENTQUEUE]([PROCESSEDDATE] ASC);


GO
CREATE NONCLUSTERED INDEX [IX_INVOICEEVENTQUEUE_CREATEDDATE]
    ON [dbo].[INVOICEEVENTQUEUE]([CREATEDDATE] ASC);

