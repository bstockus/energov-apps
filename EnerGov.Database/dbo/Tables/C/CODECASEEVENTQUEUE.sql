CREATE TABLE [dbo].[CODECASEEVENTQUEUE] (
    [CODECASEEVENTQUEUEID]  BIGINT        IDENTITY (1, 1) NOT NULL,
    [CMCODECASEID]          CHAR (36)     NOT NULL,
    [CASENUMBER]            NVARCHAR (50) NOT NULL,
    [CODECASEEVENTTYPEID]   INT           NOT NULL,
    [EVENTSTATUSID]         INT           NOT NULL,
    [CREATEDDATE]           DATETIME      NOT NULL,
    [PROCESSEDDATE]         DATETIME      NULL,
    [CODECASELASTCHANGEDBY] CHAR (36)     NULL,
    [CMVIOLATIONID]         CHAR (36)     NULL,
    CONSTRAINT [PK_CODECASEEVENTQUEUE] PRIMARY KEY CLUSTERED ([CODECASEEVENTQUEUEID] ASC),
    CONSTRAINT [FK_CodeCaseEventQueue_CodeCaseEventType] FOREIGN KEY ([CODECASEEVENTTYPEID]) REFERENCES [dbo].[CODECASEEVENTTYPE] ([CODECASEEVENTTYPEID]),
    CONSTRAINT [FK_CodeCaseEventQueue_EventStatus] FOREIGN KEY ([EVENTSTATUSID]) REFERENCES [dbo].[EVENTSTATUS] ([EVENTSTATUSID]),
    CONSTRAINT [FK_CodeCaseEventQueue_Users] FOREIGN KEY ([CODECASELASTCHANGEDBY]) REFERENCES [dbo].[USERS] ([SUSERGUID]),
    CONSTRAINT [FK_CodeCaseEventQueue_Violation] FOREIGN KEY ([CMVIOLATIONID]) REFERENCES [dbo].[CMVIOLATION] ([CMVIOLATIONID])
);


GO
CREATE NONCLUSTERED INDEX [CODECASEEVENTQUEUE_PROCESSEDDATE]
    ON [dbo].[CODECASEEVENTQUEUE]([PROCESSEDDATE] ASC);


GO
CREATE NONCLUSTERED INDEX [CODECASEEVENTQUEUE_CMVIOLATIONID]
    ON [dbo].[CODECASEEVENTQUEUE]([CMVIOLATIONID] ASC);


GO
CREATE NONCLUSTERED INDEX [IX_CODECASEEVENTQUEUE_CREATEDDATE]
    ON [dbo].[CODECASEEVENTQUEUE]([CREATEDDATE] ASC);

