CREATE TABLE [dbo].[CAINTEGRATIONBATCHPROCESS] (
    [CAINTEGRATIONBATCHPROCESSID]   INT             IDENTITY (1, 1) NOT NULL,
    [BATCH_NUMBER]                  NVARCHAR (50)   NOT NULL,
    [BATCH_TOTAL]                   MONEY           NULL,
    [REQUESTED_DATE]                DATETIME        NOT NULL,
    [PROCESSED_DATE]                DATETIME        NULL,
    [SUCCESS]                       BIT             CONSTRAINT [DF_CAINTEGRATIONBATCHPROCESS_SUCCESS] DEFAULT ((0)) NOT NULL,
    [FAILED_COUNT]                  INT             CONSTRAINT [DF_CAINTEGRATIONBATCHPROCESS_FAILED_COUNT] DEFAULT ((0)) NOT NULL,
    [RESULT_LOG]                    VARBINARY (MAX) NULL,
    [CAINTEGRATIONBATCHTYPEID]      INT             NOT NULL,
    [BLOCKAUTORESEND]               BIT             CONSTRAINT [DF_CAINTEGRATIONBATCHPROCESS_BLOCKAUTORESEND] DEFAULT ((0)) NOT NULL,
    [FINANCEBATCHID]                NVARCHAR (50)   NULL,
    [CAFINANCIALINTEGRATIONSETUPID] CHAR (36)       NULL,
    [LASTSENDATTEMPTDATE]           DATETIME        NULL,
    CONSTRAINT [PK_CAINTEGRATIONBATCHPROCESS] PRIMARY KEY CLUSTERED ([CAINTEGRATIONBATCHPROCESSID] ASC),
    CONSTRAINT [FK_BATCH_CAFINANCIALINTEGRATIONSETUPID] FOREIGN KEY ([CAFINANCIALINTEGRATIONSETUPID]) REFERENCES [dbo].[CAFINANCIALINTEGRATIONSETUP] ([CAFINANCIALINTEGRATIONSETUPID]),
    CONSTRAINT [FK_CAINTEGRATIONBATCHTYPE_ID] FOREIGN KEY ([CAINTEGRATIONBATCHTYPEID]) REFERENCES [dbo].[CAINTEGRATIONBATCHTYPE] ([CAINTEGRATIONBATCHTYPEID]),
    CONSTRAINT [UK_INTEGRATIONBATCH_FINANCEBATCHID] UNIQUE NONCLUSTERED ([FINANCEBATCHID] ASC)
);

