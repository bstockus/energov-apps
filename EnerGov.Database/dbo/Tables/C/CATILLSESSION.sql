CREATE TABLE [dbo].[CATILLSESSION] (
    [CATILLSESSIONID]     CHAR (36)      NOT NULL,
    [CATILLSESSIONNUMBER] NVARCHAR (100) NOT NULL,
    [OPENEDTIMESTAMP]     DATETIME       NOT NULL,
    [CLOSEDTIMESTAMP]     DATETIME       NULL,
    [USERID]              CHAR (36)      NOT NULL,
    [BEGINNINGBALANCE]    MONEY          NOT NULL,
    [ENDINGBALANCE]       MONEY          NOT NULL,
    [SESSIONDATE]         DATETIME       NOT NULL,
    [TILLGROUPID]         CHAR (36)      NULL,
    [OFFICEID]            CHAR (36)      NULL,
    [AMOUNTOVERORSHORT]   MONEY          DEFAULT ((0)) NOT NULL,
    CONSTRAINT [PK_CATillSession] PRIMARY KEY NONCLUSTERED ([CATILLSESSIONID] ASC) WITH (FILLFACTOR = 80),
    CONSTRAINT [FK_CATILLSESSION_GRP] FOREIGN KEY ([TILLGROUPID]) REFERENCES [dbo].[CATILLGROUP] ([TILLGROUPID]),
    CONSTRAINT [FK_CATILLSESSION_OFFICE] FOREIGN KEY ([OFFICEID]) REFERENCES [dbo].[OFFICE] ([OFFICEID]),
    CONSTRAINT [FK_CATillSession_User] FOREIGN KEY ([USERID]) REFERENCES [dbo].[USERS] ([SUSERGUID])
);


GO
CREATE NONCLUSTERED INDEX [IX_CATILLSESSION_DETAIL]
    ON [dbo].[CATILLSESSION]([USERID] ASC, [OFFICEID] ASC)
    INCLUDE([CATILLSESSIONID], [CATILLSESSIONNUMBER], [OPENEDTIMESTAMP], [CLOSEDTIMESTAMP], [BEGINNINGBALANCE], [ENDINGBALANCE], [SESSIONDATE], [TILLGROUPID], [AMOUNTOVERORSHORT]) WITH (FILLFACTOR = 80);


GO
CREATE NONCLUSTERED INDEX [NCIDX_CATILLSESSION_CLOSEDTIMESTAMP]
    ON [dbo].[CATILLSESSION]([CLOSEDTIMESTAMP] ASC) WITH (FILLFACTOR = 90, PAD_INDEX = ON);


GO
CREATE NONCLUSTERED INDEX [NCIDX_CATILLSESSION_USERID_OFFICEID]
    ON [dbo].[CATILLSESSION]([USERID] ASC, [OFFICEID] ASC) WITH (FILLFACTOR = 90, PAD_INDEX = ON);

