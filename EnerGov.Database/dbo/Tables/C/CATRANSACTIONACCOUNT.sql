CREATE TABLE [dbo].[CATRANSACTIONACCOUNT] (
    [CATRANSACTIONACCOUNTID]    CHAR (36)       NOT NULL,
    [CATRANSACTIONID]           CHAR (36)       NOT NULL,
    [CAPAYMENTTYPEID]           INT             NOT NULL,
    [ENTITYACCOUNTID]           CHAR (36)       NULL,
    [ENTITYACCOUNTNUMBER]       NVARCHAR (500)  NULL,
    [ENTITYACCOUNTDESCRIPTION]  NVARCHAR (MAX)  NULL,
    [TRANSDATE]                 DATETIME        NOT NULL,
    [AMOUNT]                    MONEY           NOT NULL,
    [CAACCOUNTACTIONID]         INT             NOT NULL,
    [NOTE]                      VARCHAR (MAX)   NULL,
    [ENTITYACCOUNTBALANCE]      MONEY           CONSTRAINT [DEF_CATransAcct_Balance] DEFAULT ((0)) NOT NULL,
    [CAPAYMENTMETHODID]         CHAR (36)       CONSTRAINT [DF_CATransAcct_PayMethod] DEFAULT ('5530AC74-FD8E-45A9-AB70-B4B1A82459C4') NOT NULL,
    [BONDRELEASEINTERESTAMOUNT] DECIMAL (20, 4) DEFAULT ((0)) NOT NULL,
    CONSTRAINT [PK_CATransactionAccount] PRIMARY KEY NONCLUSTERED ([CATRANSACTIONACCOUNTID] ASC) WITH (FILLFACTOR = 90),
    CONSTRAINT [FK_CATransAcct_Action] FOREIGN KEY ([CAACCOUNTACTIONID]) REFERENCES [dbo].[CAACCOUNTACTION] ([CAACCOUNTACTIONID]),
    CONSTRAINT [FK_CATransAcct_EntityAcct] FOREIGN KEY ([ENTITYACCOUNTID]) REFERENCES [dbo].[GLOBALENTITYACCOUNT] ([GLOBALENTITYACCOUNTID]),
    CONSTRAINT [FK_CATransAcct_PaymentType] FOREIGN KEY ([CAPAYMENTTYPEID]) REFERENCES [dbo].[CAPAYMENTTYPE] ([CAPAYMENTTYPEID]),
    CONSTRAINT [FK_CATransAcct_PayMethod] FOREIGN KEY ([CAPAYMENTMETHODID]) REFERENCES [dbo].[CAPAYMENTMETHOD] ([CAPAYMENTMETHODID]),
    CONSTRAINT [FK_CATransAcct_Transaction] FOREIGN KEY ([CATRANSACTIONID]) REFERENCES [dbo].[CATRANSACTION] ([CATRANSACTIONID])
);


GO
CREATE NONCLUSTERED INDEX [CATRANSACTIONACCOUNT_CATRANSACTION]
    ON [dbo].[CATRANSACTIONACCOUNT]([CATRANSACTIONID] ASC);

