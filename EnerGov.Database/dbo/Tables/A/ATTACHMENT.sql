CREATE TABLE [dbo].[ATTACHMENT] (
    [ATTACHMENTID]           CHAR (36)      NOT NULL,
    [FILENAME]               NVARCHAR (260) NOT NULL,
    [FILEPATH]               NVARCHAR (MAX) NOT NULL,
    [NOTES]                  NVARCHAR (MAX) NOT NULL,
    [PARENTID]               CHAR (36)      NOT NULL,
    [ADDEDON]                DATETIME       NOT NULL,
    [ADDEDBY]                CHAR (36)      NOT NULL,
    [ATTACHMENTGROUPID]      CHAR (36)      NULL,
    [DOWNLOADED]             BIT            NULL,
    [TCMDOCID]               NVARCHAR (255) NULL,
    [ERPROJECTFILEVERSIONID] CHAR (36)      NULL,
    CONSTRAINT [PK_Attachment] PRIMARY KEY NONCLUSTERED ([ATTACHMENTID] ASC) WITH (FILLFACTOR = 80),
    CONSTRAINT [FK_Attachment_AttachmentGroup] FOREIGN KEY ([ATTACHMENTGROUPID]) REFERENCES [dbo].[ATTACHMENTGROUP] ([ATTACHMENTGROUPID]),
    CONSTRAINT [FK_Attachment_ERProjectFileVersion] FOREIGN KEY ([ERPROJECTFILEVERSIONID]) REFERENCES [dbo].[ERPROJECTFILEVERSION] ([ERPROJECTFILEVERSIONID]),
    CONSTRAINT [FK_Attachment_Users] FOREIGN KEY ([ADDEDBY]) REFERENCES [dbo].[USERS] ([SUSERGUID])
);


GO
CREATE NONCLUSTERED INDEX [IX_Attachment]
    ON [dbo].[ATTACHMENT]([PARENTID] ASC) WITH (FILLFACTOR = 80);


GO
CREATE NONCLUSTERED INDEX [IX_ATTACHMENT_TCMDOCID]
    ON [dbo].[ATTACHMENT]([TCMDOCID] ASC);

