CREATE TABLE [dbo].[HISTORYFIREOCCUPANCY] (
    [HISTORYFIREOCCUPANCYID] INT            IDENTITY (1, 1) NOT NULL,
    [ID]                     CHAR (36)      NOT NULL,
    [ROWVERSION]             INT            NOT NULL,
    [CHANGEDON]              DATETIME       NOT NULL,
    [CHANGEDBY]              CHAR (36)      NOT NULL,
    [FIELDNAME]              NVARCHAR (250) NOT NULL,
    [OLDVALUE]               NVARCHAR (MAX) NOT NULL,
    [NEWVALUE]               NVARCHAR (MAX) NOT NULL,
    [ADDITIONALINFO]         NVARCHAR (MAX) NOT NULL,
    CONSTRAINT [PK_HISTORYFIREOCCUPANCYID] PRIMARY KEY CLUSTERED ([HISTORYFIREOCCUPANCYID] ASC),
    CONSTRAINT [HistoryFireOccupancy_Users] FOREIGN KEY ([CHANGEDBY]) REFERENCES [dbo].[USERS] ([SUSERGUID])
);


GO
CREATE NONCLUSTERED INDEX [HISTORYFIREOCCUPANCY_ID]
    ON [dbo].[HISTORYFIREOCCUPANCY]([ID] ASC, [ROWVERSION] ASC);


GO
CREATE NONCLUSTERED INDEX [IDX_HFir_ChangedOn]
    ON [dbo].[HISTORYFIREOCCUPANCY]([ID] ASC, [CHANGEDON] ASC, [HISTORYFIREOCCUPANCYID] ASC, [CHANGEDBY] ASC, [FIELDNAME] ASC)
    INCLUDE([ROWVERSION], [OLDVALUE], [NEWVALUE], [ADDITIONALINFO]);

