CREATE TABLE [dbo].[HISTORYLICENSEMANAGEMENT] (
    [HISTORYLICENSEMANAGEMENTID] INT            IDENTITY (1, 1) NOT NULL,
    [ID]                         CHAR (36)      NOT NULL,
    [ROWVERSION]                 INT            NOT NULL,
    [CHANGEDON]                  DATETIME       NOT NULL,
    [CHANGEDBY]                  CHAR (36)      NOT NULL,
    [FIELDNAME]                  NVARCHAR (250) NOT NULL,
    [OLDVALUE]                   NVARCHAR (MAX) NOT NULL,
    [NEWVALUE]                   NVARCHAR (MAX) NOT NULL,
    [ADDITIONALINFO]             NVARCHAR (MAX) NOT NULL,
    CONSTRAINT [PK_HistoryLicenseManagementID] PRIMARY KEY CLUSTERED ([HISTORYLICENSEMANAGEMENTID] ASC) WITH (FILLFACTOR = 100),
    CONSTRAINT [HistoryLicenseManagement_Users] FOREIGN KEY ([CHANGEDBY]) REFERENCES [dbo].[USERS] ([SUSERGUID])
);


GO
CREATE NONCLUSTERED INDEX [HistoryLicenseManagement_ID]
    ON [dbo].[HISTORYLICENSEMANAGEMENT]([ID] ASC, [ROWVERSION] ASC) WITH (FILLFACTOR = 80);


GO
CREATE NONCLUSTERED INDEX [IDX_HLic_ChangedOn]
    ON [dbo].[HISTORYLICENSEMANAGEMENT]([ID] ASC, [CHANGEDON] ASC, [HISTORYLICENSEMANAGEMENTID] ASC, [CHANGEDBY] ASC, [FIELDNAME] ASC)
    INCLUDE([ROWVERSION], [OLDVALUE], [NEWVALUE], [ADDITIONALINFO]) WITH (FILLFACTOR = 80);

