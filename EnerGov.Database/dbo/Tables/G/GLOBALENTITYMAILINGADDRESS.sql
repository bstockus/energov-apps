CREATE TABLE [dbo].[GLOBALENTITYMAILINGADDRESS] (
    [GLOBALENTITYMAILINGADDRESSID] CHAR (36) DEFAULT (newid()) NOT NULL,
    [GLOBALENTITYID]               CHAR (36) NOT NULL,
    [MAILINGADDRESSID]             CHAR (36) NOT NULL,
    [MAIN]                         BIT       DEFAULT ((0)) NOT NULL,
    CONSTRAINT [PK_GlobalEntityAddress] PRIMARY KEY CLUSTERED ([GLOBALENTITYMAILINGADDRESSID] ASC),
    CONSTRAINT [FK_EntityAddress_Address] FOREIGN KEY ([MAILINGADDRESSID]) REFERENCES [dbo].[MAILINGADDRESS] ([MAILINGADDRESSID]),
    CONSTRAINT [FK_EntityAddress_Entity] FOREIGN KEY ([GLOBALENTITYID]) REFERENCES [dbo].[GLOBALENTITY] ([GLOBALENTITYID])
);


GO
CREATE NONCLUSTERED INDEX [IX_GLB_CONT_MAIL_MAIL]
    ON [dbo].[GLOBALENTITYMAILINGADDRESS]([MAIN] ASC, [GLOBALENTITYID] ASC)
    INCLUDE([GLOBALENTITYMAILINGADDRESSID], [MAILINGADDRESSID]);


GO
CREATE NONCLUSTERED INDEX [GLOBALENTITYMAILINGADDRESS_IX_QUERY]
    ON [dbo].[GLOBALENTITYMAILINGADDRESS]([GLOBALENTITYID] ASC);

