CREATE TABLE [dbo].[PURECEIPTLINE] (
    [PURECEIPTLINEID]       CHAR (36)       NOT NULL,
    [PURECEIPTID]           CHAR (36)       NOT NULL,
    [LINE]                  INT             NOT NULL,
    [INVENTORY]             BIT             NOT NULL,
    [ITEMID]                CHAR (36)       NULL,
    [AMRESOURCEID]          CHAR (36)       NULL,
    [INSTOREITEMID]         CHAR (36)       NULL,
    [QUANTITYRECEIVED]      DECIMAL (10, 2) NOT NULL,
    [QUANTITYREJECTED]      DECIMAL (10, 2) NOT NULL,
    [REJECTIONREASON]       VARCHAR (MAX)   NULL,
    [INSTOREBINITEMID]      CHAR (36)       NULL,
    [UNITCOST]              DECIMAL (10, 2) NULL,
    [PUPURCHASEORDERLINEID] CHAR (36)       NULL,
    [INSTOREID]             CHAR (36)       NULL,
    [UNITOFMEASURE]         CHAR (36)       NOT NULL,
    CONSTRAINT [PK_PUReceiptLine] PRIMARY KEY CLUSTERED ([PURECEIPTLINEID] ASC) WITH (FILLFACTOR = 90),
    CONSTRAINT [FK_PURcptLn_AMResource] FOREIGN KEY ([AMRESOURCEID]) REFERENCES [dbo].[AMRESOURCE] ([AMRESOURCEID]),
    CONSTRAINT [FK_PURcptLn_INStore] FOREIGN KEY ([INSTOREID]) REFERENCES [dbo].[INSTORE] ([INSTOREID]),
    CONSTRAINT [FK_PURcptLn_INStoreItem] FOREIGN KEY ([INSTOREITEMID]) REFERENCES [dbo].[INSTOREITEM] ([INSTOREITEMID]),
    CONSTRAINT [FK_PURcptLn_INStoreItemBin] FOREIGN KEY ([INSTOREBINITEMID]) REFERENCES [dbo].[INSTOREITEMBIN] ([INSTOREITEMBINID]),
    CONSTRAINT [FK_PURcptLn_Item] FOREIGN KEY ([ITEMID]) REFERENCES [dbo].[ITEM] ([ITEMID]),
    CONSTRAINT [FK_PURcptLn_PUPOLine] FOREIGN KEY ([PUPURCHASEORDERLINEID]) REFERENCES [dbo].[PUPURCHASEORDERLINE] ([PUPURCHASEORDERLINEID]),
    CONSTRAINT [FK_PURcptLn_PUReceipt] FOREIGN KEY ([PURECEIPTID]) REFERENCES [dbo].[PURECEIPT] ([PURECEIPTID]),
    CONSTRAINT [FK_PURcptLn_UnitOfMeasure] FOREIGN KEY ([UNITOFMEASURE]) REFERENCES [dbo].[UNITOFMEASURE] ([UNITOFMEASUREID])
);


GO
CREATE UNIQUE NONCLUSTERED INDEX [UX_ReceiptLine_Line]
    ON [dbo].[PURECEIPTLINE]([PURECEIPTLINEID] ASC, [LINE] ASC) WITH (FILLFACTOR = 90, ALLOW_PAGE_LOCKS = OFF);

