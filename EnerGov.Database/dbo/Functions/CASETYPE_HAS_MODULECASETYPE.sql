
CREATE FUNCTION [dbo].[CASETYPE_HAS_MODULECASETYPE]
(
	@MODULE_CASETYPE_ID CHAR(36),
	@MODULE_CASETYPE_WORKCLASS_ID CHAR(36),
	@IPCONDITION_ID CHAR(36)
)
RETURNS BIT
AS
BEGIN
	DECLARE @RESULT AS BIT
	SET @RESULT = 0

	-- Evaluate the result
		-- 1) if case type exist with provided work class
		-- THEN set the result to success
		IF (EXISTS(SELECT 1 FROM IPCONDITIONCASETYPE
				INNER JOIN IPCONDITIONCASETYPEWORKCLASS ON IPCONDITIONCASETYPEWORKCLASS.IPCONDITIONCASETYPEID = IPCONDITIONCASETYPE.IPCONDITIONCASETYPEID
					WHERE IPCONDITIONCASETYPE.MODULECASETYPEID = @MODULE_CASETYPE_ID AND IPCONDITIONCASETYPE.IPCONDITIONID= @IPCONDITION_ID AND IPCONDITIONCASETYPEWORKCLASS.MODULEWORKCLASSID = @MODULE_CASETYPE_WORKCLASS_ID))
		BEGIN
			SET @RESULT=1
		END
	RETURN @RESULT
END