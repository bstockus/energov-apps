CREATE PROCEDURE [communitydevelopmentsetup].[USP_PMCONTACTTYPEREF_GETBYPARENTID]
(
	@PMPERMITTYPEID CHAR(36)
)
AS
BEGIN
SELECT 
	[dbo].[PMCONTACTTYPEREF].[CONTACTTYPEEXTID],
	[dbo].[PMPERMITTYPEWORKCLASS].[PMPERMITTYPEID],
	[dbo].[PMCONTACTTYPEREF].[OBJCLASSID],
	[dbo].[PMCONTACTTYPEREF].[LANDMANAGEMENTCONTACTTYPEID],	
	[dbo].[PMCONTACTTYPEREF].[ISREQUIRED],	
	[dbo].[PMCONTACTTYPEREF].[ISDEFAULTONLINECONTACTTYPE],
	[dbo].[PMCONTACTTYPEREF].[CONTACTTYPEGROUP],
	[dbo].[LANDMANAGEMENTCONTACTTYPE].[NAME],
	[dbo].[PMCONTACTTYPEREF].[OBJTYPEID]
FROM [dbo].[PMCONTACTTYPEREF]
INNER JOIN [dbo].[PMPERMITTYPEWORKCLASS]
	ON [dbo].[PMPERMITTYPEWORKCLASS].[PMPERMITTYPEWORKCLASSID] = [dbo].[PMCONTACTTYPEREF].[OBJTYPEID]
INNER JOIN [dbo].[LANDMANAGEMENTCONTACTTYPE] 
	ON [dbo].[LANDMANAGEMENTCONTACTTYPE].[LANDMANAGEMENTCONTACTTYPEID] = [dbo].[PMCONTACTTYPEREF].[LANDMANAGEMENTCONTACTTYPEID]
WHERE
	[dbo].[PMPERMITTYPEWORKCLASS].[PMPERMITTYPEID] = @PMPERMITTYPEID
ORDER BY [dbo].[PMCONTACTTYPEREF].[OBJCLASSID], [dbo].[LANDMANAGEMENTCONTACTTYPE].[NAME]
END