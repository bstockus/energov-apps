CREATE  PROCEDURE [systemsettingsmanager].[USP_RESOURCE_GETALL]      
@USERID CHAR(36),  
@FILTEREDDATE DATETIME  
AS    
BEGIN 
SET NOCOUNT ON;
 SELECT     
[RESOURCE].[RESOURCEID],  
[RESOURCE].[USERID],  
[RESOURCE].[UNAVAILABLESTARTDATE],  
[RESOURCE].[UNAVAILABLEENDDATE],  
[RESOURCE].[REASON],  
[RESOURCE].[DELEGATEUSERID]  
  FROM  [dbo].[RESOURCE]
 WHERE  
 [RESOURCE].[USERID] = @USERID AND  
 [RESOURCE].[UNAVAILABLEENDDATE] >= @FILTEREDDATE  
 ORDER BY [RESOURCE].[UNAVAILABLESTARTDATE],[RESOURCE].[UNAVAILABLEENDDATE]  
END