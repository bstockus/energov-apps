CREATE PROCEDURE [globalsearch].[USP_HOLDTYPESETUPS_GETBYIDS_LOOKUP]
(
	@HOLDS RECORDIDS READONLY -- @IDS
)
AS
BEGIN
SET NOCOUNT ON;

WITH HOLDS_CTE (HOLDSETUPID) AS
	( 
	SELECT DISTINCT HOLDSETUPID FROM(
		SELECT [BLEXTHOLD].[HOLDSETUPID] HOLDSETUPID FROM [dbo].[BLEXTHOLD] INNER JOIN @HOLDS ON [@HOLDS].RECORDID = [dbo].[BLEXTHOLD].[BLEXTHOLDID]
		UNION ALL
		SELECT [BLLICENSEHOLD].[HOLDSETUPID] HOLDSETUPID FROM [dbo].[BLLICENSEHOLD] INNER JOIN @HOLDS ON [@HOLDS].RECORDID = [dbo].[BLLICENSEHOLD].[BLLICENSEHOLDID]
		UNION ALL
		SELECT [ILLICENSEHOLD].[HOLDSETUPID] HOLDSETUPID FROM [dbo].[ILLICENSEHOLD] INNER JOIN @HOLDS ON [@HOLDS].RECORDID = [dbo].[ILLICENSEHOLD].[ILLICENSEHOLDID]
		UNION ALL
		SELECT [GLOBALENTITYHOLD].[HOLDSETUPID] HOLDSETUPID FROM [dbo].[GLOBALENTITYHOLD] INNER JOIN @HOLDS ON [@HOLDS].RECORDID = [dbo].[GLOBALENTITYHOLD].[GLOBALENTITYHOLDID]
		UNION ALL
		SELECT [PRPROJECTHOLD].[HOLDSETUPID] HOLDSETUPID FROM [dbo].[PRPROJECTHOLD] INNER JOIN @HOLDS ON [@HOLDS].RECORDID = [dbo].[PRPROJECTHOLD].PRPROJECTHOLDID
	) holdSetupIds )
SELECT 
		[HOLDTYPESETUPS].[HOLDSETUPID],
		[HOLDTYPESETUPS].[NAME],
		[HOLDTYPESETUPS].[HOLDTYPEID],
		[HOLDTYPESETUPS].[ALLOWHOLDOVERRIDES],
		[HOLDTYPESETUPS].[ACTIVE],
		[HOLDTYPESETUPS].[BNEWLICENSE],
		[HOLDTYPESETUPS].[BUSINESSINSP],
		[HOLDTYPESETUPS].[BRENEWLICENSE],
		[HOLDTYPESETUPS].[BLWF],
		[HOLDTYPESETUPS].[ILPULLPLAN],
		[HOLDTYPESETUPS].[BLPULLPERMIT],
		[HOLDTYPESETUPS].[PERMITNEW],
		[HOLDTYPESETUPS].[BLPULLPLAN],
		[HOLDTYPESETUPS].[PERMITISSUANCE],
		[HOLDTYPESETUPS].[PERMITFINALING],
		[HOLDTYPESETUPS].[PERMITINSPECTION],
		[HOLDTYPESETUPS].[PERMITRENEWALRESTRICTION],
		[HOLDTYPESETUPS].[PERMITWFSUBREVIEW],
		[HOLDTYPESETUPS].[PLANNEW],
		[HOLDTYPESETUPS].[PLANCOMPLETE],
		[HOLDTYPESETUPS].[PLANWFSUBREVIVIEW],
		[HOLDTYPESETUPS].[PLANINSPECTION],
		[HOLDTYPESETUPS].[ILPULLPERMIT],
		[HOLDTYPESETUPS].[ILPULLBL],
		[HOLDTYPESETUPS].[BLRENEW],
		[HOLDTYPESETUPS].PLRENEW,
		[HOLDTYPESETUPS].ILWF,
		[HOLDTYPESETUPS].ENTPROLICRENEWAL
	FROM [dbo].[HOLDTYPESETUPS] WITH (NOLOCK)
	INNER JOIN HOLDS_CTE on HOLDS_CTE.HOLDSETUPID = [dbo].[HOLDTYPESETUPS].HOLDSETUPID

END