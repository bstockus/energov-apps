CREATE PROCEDURE [application].[USP_PLAPPLICATION_RECENT]
(
	@USERID AS CHAR(36),
	@PAGE_NUMBER AS INT = 1,
	@PAGE_SIZE AS INT = 15
)
AS
BEGIN
	DECLARE @RECENTLIST AS RecordIDs

	INSERT INTO @RECENTLIST (RECORDID)
		SELECT TOP 15 RECENTHISTORYAPPLICATION.PLAPPLICATIONID
		FROM RECENTHISTORYAPPLICATION
		WHERE RECENTHISTORYAPPLICATION.USERID = @USERID
		ORDER BY RECENTHISTORYAPPLICATION.LOGGEDDATETIME DESC

	EXEC [application].[USP_PLAPPLICATION_GETBYIDS] @RECENTLIST
	EXEC [application].[USP_PLAPPLICATIONADDRESS_GETBYIDS] @RECENTLIST
	EXEC [application].[USP_PLAPPLICATIONCONTACT_GETBYIDS] @RECENTLIST
END