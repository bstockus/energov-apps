CREATE PROCEDURE [incidentrequest].[USP_CONTACT_PLAN_LINKEDRECORDS_GETBYPARENTID]
(
	@PARENTID CHAR(36)
)
AS
BEGIN
SET NOCOUNT ON;
SELECT 
	[PLPLAN].[PLANNUMBER],
	[PLPLANTYPE].[PLANNAME] PLANTYPE,
	[PLPLANWORKCLASS].[NAME] WORKCLASS,
	[PLPLANSTATUS].[NAME] [STATUS],
	[PLPLANSTATUS].[CANCELLEDFLAG],
	[PLPLANSTATUS].[SUCCESSFLAG] SUCCESSFLAG,
	[PLPLANSTATUS].[FAILUREFLAG],
	[PLPLANSTATUS].[HOLDFLAG],
	[PLPLAN].[PLPLANID]
FROM [PLPLAN]
INNER JOIN [PLPLANCONTACT]
ON [PLPLANCONTACT].[PLPLANID] = [PLPLAN].[PLPLANID]
INNER JOIN [PLPLANTYPE] WITH (NOLOCK)
ON [PLPLANTYPE].[PLPLANTYPEID] = [PLPLAN].[PLPLANTYPEID]
INNER JOIN [PLPLANWORKCLASS] WITH (NOLOCK)
ON [PLPLANWORKCLASS].[PLPLANWORKCLASSID] = [PLPLAN].[PLPLANWORKCLASSID]
INNER JOIN [PLPLANSTATUS] WITH (NOLOCK)
ON [PLPLANSTATUS].[PLPLANSTATUSID] = [PLPLAN].[PLPLANSTATUSID]
WHERE
	[PLPLANCONTACT].[GLOBALENTITYID] = @PARENTID
END