CREATE PROCEDURE [incidentrequest].[USP_PARCEL_CONTEXTUALINFO_PERMIT_LINKEDRECORDS_GETBYPARENTID] 
	@PARENTID char(36)
AS
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;
   
	SELECT DISTINCT			
			[PMPERMIT].[PERMITNUMBER],
			[PMPERMITTYPE].[NAME],
			[PMPERMITWORKCLASS].[NAME],
			[PMPERMITSTATUS].[NAME],
			[PMPERMITSTATUS].[CANCELLEDFLAG],
			[PMPERMITSTATUS].[COMPLETEDFLAG],
			[PMPERMITSTATUS].[FAILUREFLAG],
			[PMPERMITSTATUS].[HOLDFLAG],
			[PMPERMITSTATUS].[ISSUEDFLAG],
			[PMPERMIT].[PMPERMITID]
	FROM [PMPERMITPARCEL]	
	INNER JOIN [PMPERMIT] ON [PMPERMIT].[PMPERMITID] = [PMPERMITPARCEL].PMPERMITID
	INNER JOIN [PMPERMITTYPE] ON [PMPERMITTYPE].[PMPERMITTYPEID] = [PMPERMIT].[PMPERMITTYPEID]
	INNER JOIN [PMPERMITWORKCLASS] ON [PMPERMITWORKCLASS].[PMPERMITWORKCLASSID] = [PMPERMIT].[PMPERMITWORKCLASSID]
	INNER JOIN [PMPERMITSTATUS] ON [PMPERMITSTATUS].[PMPERMITSTATUSID] = [PMPERMIT].[PMPERMITSTATUSID]	
	WHERE 
		[PMPERMITPARCEL].[PARCELID] = @PARENTID
END