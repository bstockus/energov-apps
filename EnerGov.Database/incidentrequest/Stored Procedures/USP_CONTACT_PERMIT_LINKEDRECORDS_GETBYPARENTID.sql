CREATE PROCEDURE [incidentrequest].[USP_CONTACT_PERMIT_LINKEDRECORDS_GETBYPARENTID]
(
	@PARENTID CHAR(36)
)
AS
BEGIN
SET NOCOUNT ON;
SELECT 
	[PMPERMIT].[PERMITNUMBER],
	[PMPERMITTYPE].[NAME] PERMITTYPE,
	[PMPERMITWORKCLASS].[NAME] WORKCLASS,
	[PMPERMITSTATUS].[NAME] [STATUS],
	[PMPERMITSTATUS].[CANCELLEDFLAG],
	[PMPERMITSTATUS].[COMPLETEDFLAG],
	[PMPERMITSTATUS].[FAILUREFLAG],
	[PMPERMITSTATUS].[HOLDFLAG],
	[PMPERMITSTATUS].[ISSUEDFLAG],
	[PMPERMIT].[PMPERMITID]
FROM [PMPERMIT]
INNER JOIN [PMPERMITCONTACT]
ON [PMPERMITCONTACT].[PMPERMITID] = [PMPERMIT].[PMPERMITID]
INNER JOIN [PMPERMITTYPE] WITH (NOLOCK)
ON [PMPERMITTYPE].[PMPERMITTYPEID] = [PMPERMIT].[PMPERMITTYPEID]
INNER JOIN [PMPERMITWORKCLASS] WITH (NOLOCK)
ON [PMPERMITWORKCLASS].[PMPERMITWORKCLASSID] = [PMPERMIT].[PMPERMITWORKCLASSID]
INNER JOIN [PMPERMITSTATUS] WITH (NOLOCK)
ON [PMPERMITSTATUS].[PMPERMITSTATUSID] = [PMPERMIT].[PMPERMITSTATUSID]
WHERE
	[PMPERMITCONTACT].[GLOBALENTITYID] = @PARENTID
END