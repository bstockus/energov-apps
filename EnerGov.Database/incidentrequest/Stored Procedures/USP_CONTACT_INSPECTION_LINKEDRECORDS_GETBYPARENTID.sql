CREATE PROCEDURE [incidentrequest].[USP_CONTACT_INSPECTION_LINKEDRECORDS_GETBYPARENTID]
(
	@PARENTID CHAR(36)
)
AS
BEGIN
SET NOCOUNT ON;
SELECT 
	[IMINSPECTION].[INSPECTIONNUMBER] CASENUMBER,
	[IMINSPECTIONTYPE].[NAME] CASETYPE,
	[IMINSPECTIONSTATUS].[STATUSNAME] [STATUS],
	[IMINSPECTIONSTATUS].[CANCELLEDFLAG],
	[IMINSPECTIONSTATUS].[INVIOLATIONFLAG],
	[IMINSPECTIONSTATUS].[OUTOFVIOLATIONFLAG],
	[IMINSPECTIONSTATUS].[REINSPECTIONFLAG],
	[IMINSPECTIONSTATUS].[SCHEDULEDFLAG],
	[IMINSPECTIONSTATUS].[WAITFLAG],
	[IMINSPECTIONSTATUS].[PARTIALPASS],
	[IMINSPECTIONSTATUS].[EXTEND_EXPIRE_DATE],
	[IMINSPECTIONSTATUS].[INDICATESSUCCESS],
	[IMINSPECTION].[IMINSPECTIONID]
FROM [IMINSPECTION]
INNER JOIN [IMINSPECTIONCONTACT]
ON [IMINSPECTIONCONTACT].[IMINSPECTIONID] = [IMINSPECTION].[IMINSPECTIONID]
INNER JOIN [IMINSPECTIONTYPE] WITH (NOLOCK)
ON [IMINSPECTIONTYPE].[IMINSPECTIONTYPEID] = [IMINSPECTION].[IMINSPECTIONTYPEID]
INNER JOIN [IMINSPECTIONSTATUS] WITH (NOLOCK)
ON [IMINSPECTIONSTATUS].[IMINSPECTIONSTATUSID] = [IMINSPECTION].[IMINSPECTIONSTATUSID]
WHERE
	[IMINSPECTIONCONTACT].[GLOBALENTITYID] = @PARENTID
END