CREATE PROCEDURE [energovnotifications].[USP_MEETING_ASSOCIATECASES_GETBYID]
(
	@MEETINGID CHAR(36)
)
AS
BEGIN
SET NOCOUNT ON;
DECLARE @OBJECTLIST AS RecordIDs
DECLARE @MEETINGTYPEID AS CHAR(36)
DECLARE @STARTDATE AS DATE
SELECT 
	@MEETINGTYPEID=[dbo].[MEETING].[MEETINGTYPEID],
	@STARTDATE=[dbo].[MEETING].[STARTDATE]
FROM [dbo].[MEETING] WHERE [dbo].[MEETING].[MEETINGID] = @MEETINGID 

INSERT INTO @OBJECTLIST (RECORDID) 
	  SELECT DISTINCT [dbo].[MEETINGXREF].OBJECTID FROM [dbo].[MEETING]
       INNER JOIN [dbo].[MEETINGTYPE] ON [dbo].[MEETINGTYPE].[MEETINGTYPEID] = [dbo].[MEETING].[MEETINGTYPEID]
       INNER JOIN [dbo].[MEETINGXREF] ON [dbo].[MEETINGXREF].[MEETINGID] = [dbo].[MEETING].[MEETINGID]
       INNER JOIN [dbo].[MEETINGATTENDEE] on [dbo].[MEETINGATTENDEE].[HEARINGID] =  [dbo].[MEETING].[MEETINGID] 
	   INNER JOIN [dbo].[USERS] on [dbo].[USERS].[SUSERGUID] = [dbo].[MEETINGATTENDEE].[ATTENDEEID] 
	  WHERE [dbo].[MEETINGTYPE].[MEETINGTYPEID] =@MEETINGTYPEID AND CAST([dbo].[MEETING].[STARTDATE] AS DATE) = @STARTDATE

	EXEC [energovnotifications].[USP_ASSOCIATECASES_BYIDS] @OBJECTLIST  
END