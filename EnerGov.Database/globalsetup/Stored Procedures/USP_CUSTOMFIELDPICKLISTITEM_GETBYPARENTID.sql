CREATE PROCEDURE [globalsetup].[USP_CUSTOMFIELDPICKLISTITEM_GETBYPARENTID]
(
	@FKGCUSTOMFIELDLAYOUT CHAR(36)
)
AS
BEGIN
	SET NOCOUNT ON;
	SELECT 
		[dbo].[CUSTOMFIELDPICKLISTITEM].[GCUSTOMFIELDPICKLISTITEM],
		[dbo].[CUSTOMFIELDPICKLISTITEM].[FKGCUSTOMFIELDPICKLIST],
		[dbo].[CUSTOMFIELDPICKLISTITEM].[SVALUE],
		[dbo].[CUSTOMFIELDPICKLISTITEM].[IORDER],
		[dbo].[CUSTOMFIELDPICKLISTITEM].[ISRETIRE],
		[dbo].[CUSTOMFIELDPICKLISTITEM].[FKCUSTOMFIELDTEMPLATEITEM],
		[dbo].[CUSTOMFIELDTEMPLATEITEM].[SVALUE] AS TEMPLATE_VALUE
	FROM [dbo].[CUSTOMFIELDPICKLISTITEM]
	INNER JOIN [dbo].[CUSTOMFIELDPICKLIST] ON [dbo].[CUSTOMFIELDPICKLIST].[GCUSTOMFIELDPICKLIST] = [dbo].[CUSTOMFIELDPICKLISTITEM].[FKGCUSTOMFIELDPICKLIST]
	INNER JOIN [dbo].[CUSTOMFIELD] ON [dbo].[CUSTOMFIELD].[GCUSTOMFIELD] = [dbo].[CUSTOMFIELDPICKLIST].[FKGCUSTOMFIELD]
	INNER JOIN [dbo].[CUSTOMFIELDOBJECT] ON [dbo].[CUSTOMFIELDOBJECT].[GCUSTOMFIELD] = [dbo].[CUSTOMFIELD].[GCUSTOMFIELD]
	LEFT OUTER JOIN [dbo].[CUSTOMFIELDTEMPLATEITEM] ON [dbo].[CUSTOMFIELDTEMPLATEITEM].[GCUSTOMFIELDTEMPLATEITEM] = [dbo].[CUSTOMFIELDPICKLISTITEM].[FKCUSTOMFIELDTEMPLATEITEM]
	WHERE
		[dbo].[CUSTOMFIELDOBJECT].[FKGCUSTOMFIELDLAYOUT] = @FKGCUSTOMFIELDLAYOUT  
	ORDER BY
		[dbo].[CUSTOMFIELDPICKLISTITEM].[IORDER]
END