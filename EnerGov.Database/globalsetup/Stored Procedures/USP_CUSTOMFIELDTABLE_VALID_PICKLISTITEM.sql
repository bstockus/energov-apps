CREATE PROCEDURE [globalsetup].[USP_CUSTOMFIELDTABLE_VALID_PICKLISTITEM]  
(  
 @CUSTOMFIELDTEMPLATEID CHAR(36),  
 @DEFAULTVALUE NVARCHAR(50)  
)  
AS 
BEGIN 
DECLARE @ISVALIDPICKLISTITEM BIT = 0;
SET NOCOUNT ON;  
 IF EXISTS(
	SELECT 1 FROM CUSTOMFIELDPICKLISTITEM
			INNER JOIN CUSTOMFIELDPICKLIST ON CUSTOMFIELDPICKLIST.GCUSTOMFIELDPICKLIST = CUSTOMFIELDPICKLISTITEM.FKGCUSTOMFIELDPICKLIST
			INNER JOIN CUSTOMFIELD ON  CUSTOMFIELD.GCUSTOMFIELD = CUSTOMFIELDPICKLIST.FKGCUSTOMFIELD
			INNER JOIN CUSTOMFIELDCOLUMNTEMPLATE ON CUSTOMFIELDCOLUMNTEMPLATE.GCUSTOMFIELD = CUSTOMFIELD.GCUSTOMFIELD
			INNER JOIN CUSTOMFIELDTABLECOLUMNREF ON CUSTOMFIELDTABLECOLUMNREF.CUSTOMFIELDCOLUMNTEMPLATEID = CUSTOMFIELDCOLUMNTEMPLATE.CUSTOMFIELDCOLUMNTEMPLATEID
	WHERE CUSTOMFIELDCOLUMNTEMPLATE.CUSTOMFIELDCOLUMNTEMPLATEID = @CUSTOMFIELDTEMPLATEID
	AND CUSTOMFIELDPICKLISTITEM.SVALUE = @DEFAULTVALUE
 )
	BEGIN
	SET @ISVALIDPICKLISTITEM = 1
	END
	SELECT @ISVALIDPICKLISTITEM

 END