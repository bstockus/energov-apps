CREATE PROCEDURE [globalsetup].[USP_CAFEETEMPLATEFEE_GETBYPARENTID]
	@CAFEETEMPLATEID CHAR(36)
AS
BEGIN
SET NOCOUNT ON;

SELECT	[dbo].[CAFEETEMPLATEFEE].[CAFEETEMPLATEFEEID],
		[dbo].[CAFEETEMPLATEFEE].[CAFEETEMPLATEID],
		[dbo].[CAFEETEMPLATEFEE].[CAFEEID],
		[dbo].[CAFEETEMPLATEFEE].[FEENAME],
		[dbo].[CAFEETEMPLATEFEE].[FEEDESCRIPTION],
		[dbo].[CAFEETEMPLATEFEE].[FEEORDER],
		[dbo].[CAFEETEMPLATEFEE].[FEEPRIORITY],
		[dbo].[CAFEE].[CACOMPUTATIONTYPEID],
		[dbo].[CAFEETEMPLATEFEE].[CACONDITIONGROUPID],
		[dbo].[CAFEETEMPLATEFEE].[CAEXPRESSIONID],
		[dbo].[CAFEETEMPLATEFEE].[ROUNDINGTYPEID],
		[dbo].[CAFEETEMPLATEFEE].[ROUNDINGVALUE],
		[dbo].[CAFEETEMPLATEFEE].[ISHIDDEN],
		[dbo].[CAFEETEMPLATEFEE].[ISMANUAL],
		[dbo].[CAFEETEMPLATEFEE].[DISPLAYDEFAULTINPUT],
		[dbo].[CAFEETEMPLATEFEE].[DISPLAYSINGLEINPUT],
		[dbo].[CAFEETEMPLATEFEE].[INPUTHIDDEN],
		[dbo].[CAFEETEMPLATEFEE].[ISONLINE],
		[dbo].[CAFEETEMPLATEFEE].[ISDISABLE],
		CASE (SELECT TOP 1 1 FROM CAFEESETUP 
			WHERE [dbo].[CAFEESETUP].[CAFEEID] = [dbo].[CAFEE].[CAFEEID] AND [dbo].[CAFEESETUP].[CAPRORATIONMODELID] = 2) WHEN 1 THEN
				CONVERT(BIT,1)
			ELSE
				CONVERT(BIT,0)
			END AS [ISPRORATIONBYDATE]
FROM [dbo].[CAFEETEMPLATEFEE]
JOIN [dbo].[CAFEE] ON [dbo].[CAFEE].[CAFEEID] = [dbo].[CAFEETEMPLATEFEE].[CAFEEID]
WHERE [dbo].[CAFEETEMPLATEFEE].[CAFEETEMPLATEID] = @CAFEETEMPLATEID
ORDER BY [dbo].[CAFEETEMPLATEFEE].[FEEORDER]

END