CREATE PROCEDURE [globalsetup].[USP_CUSTOMFIELDTABLECOLUMNREF_GETBYPARENTID]
(
	@PARENTID CHAR(36)
)
AS
BEGIN
	SET NOCOUNT ON;
	SELECT 
		[dbo].[CUSTOMFIELDTABLECOLUMNREF].[CUSTOMFIELDTABLECOLUMNREFID],
		[dbo].[CUSTOMFIELDTABLECOLUMNREF].[CUSTOMFIELDTABLEID],
		[dbo].[CUSTOMFIELDTABLECOLUMNREF].[CUSTOMFIELDCOLUMNTEMPLATEID],
		[dbo].[CUSTOMFIELDTABLECOLUMNREF].[DISPLAYNAME],
		[dbo].[CUSTOMFIELDTABLECOLUMNREF].[IORDER],
		[dbo].[CUSTOMFIELDTABLECOLUMNREF].[RETIRED],
		[dbo].[CUSTOMFIELDTABLECOLUMNREF].[SDEFAULTVALUE],
		[dbo].[CUSTOMFIELDTABLECOLUMNREF].[BISREQUIRED],
		[dbo].[CUSTOMFIELDTABLECOLUMNREF].[FORMULA],
		[dbo].[CUSTOMFIELDTABLECOLUMNREF].[SHOWONMOBILE],
		[dbo].[CUSTOMFIELDLAYOUTCONTROLTYPE].[SNAME] AS CONTROLTYPENAME,
		[dbo].[CUSTOMFIELDTYPE].[SNAME] AS FIELDTYPENAME,
		[dbo].[CUSTOMFIELDCOLUMNTEMPLATE].[SCOLUMNNAME],
		[dbo].[CUSTOMFIELD].[SFIELDNAME] AS SFIELDNAME,
		[dbo].[CUSTOMFIELD].[FKICUSTOMFIELDTYPE] AS FIELDTYPEID,
		[dbo].[CUSTOMFIELDLAYOUTCONTROLTYPE].[ICUSTOMFIELDLAYOUTCONTROLTYPE] AS CUSTOMFIELDCONTROLTYPE

	FROM [dbo].[CUSTOMFIELDTABLECOLUMNREF]
	INNER JOIN [dbo].[CUSTOMFIELDCOLUMNTEMPLATE] ON [dbo].[CUSTOMFIELDCOLUMNTEMPLATE].[CUSTOMFIELDCOLUMNTEMPLATEID] = [dbo].[CUSTOMFIELDTABLECOLUMNREF].[CUSTOMFIELDCOLUMNTEMPLATEID]
	INNER JOIN [dbo].[CUSTOMFIELD] ON  [dbo].[CUSTOMFIELD].[GCUSTOMFIELD] = [dbo].[CUSTOMFIELDCOLUMNTEMPLATE].[GCUSTOMFIELD]
	INNER JOIN [dbo].[CUSTOMFIELDTYPE] ON  [dbo].[CUSTOMFIELDTYPE].[ICUSTOMFIELDTYPE] = [dbo].[CUSTOMFIELD].[FKICUSTOMFIELDTYPE]
	INNER JOIN [dbo].[CUSTOMFIELDLAYOUTCONTROLTYPE] ON  [dbo].[CUSTOMFIELDLAYOUTCONTROLTYPE].[ICUSTOMFIELDLAYOUTCONTROLTYPE] = [dbo].[CUSTOMFIELDCOLUMNTEMPLATE].[FKCUSTOMFIELDLAYOUTCONTROLTYPE]
	WHERE [dbo].[CUSTOMFIELDTABLECOLUMNREF].[CUSTOMFIELDTABLEID] = @PARENTID
	ORDER BY [dbo].[CUSTOMFIELDTABLECOLUMNREF].[IORDER]
END