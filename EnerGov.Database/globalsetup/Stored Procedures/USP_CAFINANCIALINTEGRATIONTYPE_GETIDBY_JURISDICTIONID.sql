CREATE PROCEDURE [globalsetup].[USP_CAFINANCIALINTEGRATIONTYPE_GETIDBY_JURISDICTIONID]
(
	@JURISDICTIONID CHAR(36) = NULL
)
AS
BEGIN
	SET NOCOUNT ON;

	DECLARE @CAFINANCIALINTEGRATIONTYPEID INT = NULL
	DECLARE @CAFINANCIALINTEGRATIONSETUPID CHAR(36) = NULL

	SELECT	TOP 1 @CAFINANCIALINTEGRATIONSETUPID = [dbo].[JURISDICTION].[CAFINANCIALINTEGRATIONSETUPID]
	FROM	[dbo].[JURISDICTION] WITH (NOLOCK)
	WHERE	[dbo].[JURISDICTION].[JURISDICTIONID] = @JURISDICTIONID

	SELECT	TOP 1 @CAFINANCIALINTEGRATIONTYPEID = [dbo].[CAFINANCIALINTEGRATIONSETUP].[CAFINANCIALINTEGRATIONTYPEID]
	FROM	[dbo].[CAFINANCIALINTEGRATIONSETUP] WITH (NOLOCK)
	WHERE	[dbo].[CAFINANCIALINTEGRATIONSETUP].[CAFINANCIALINTEGRATIONSETUPID] = @CAFINANCIALINTEGRATIONSETUPID
			OR (@CAFINANCIALINTEGRATIONSETUPID IS NULL AND [dbo].[CAFINANCIALINTEGRATIONSETUP].[ISDEFAULT] = 1)

	SELECT	[dbo].[CAFINANCIALINTEGRATIONTYPE].[CAFINANCIALINTEGRATIONTYPEID]
	FROM	[dbo].[CAFINANCIALINTEGRATIONTYPE] WITH (NOLOCK)
	WHERE	[dbo].[CAFINANCIALINTEGRATIONTYPE].[CAFINANCIALINTEGRATIONTYPEID] = @CAFINANCIALINTEGRATIONTYPEID
	
END