CREATE PROCEDURE [globalsetup].[USP_BONDGLACCOUNTXREF_GETBYPARENTID]
(
	@PARENTID CHAR(36)
)
AS
BEGIN
SET NOCOUNT ON;
SELECT 
	[dbo].[BONDGLACCOUNTXREF].[BONDGLACCOUNTXREFID],
	[dbo].[BONDGLACCOUNTXREF].[BONDINTERESTSCHEDULEID],
	[dbo].[BONDGLACCOUNTXREF].[DEBITGLACCOUNTID],
	[dbo].[BONDGLACCOUNTXREF].[CREDITGLACCOUNTID],
	[dbo].[BONDGLACCOUNTXREF].[CAPAYMENTMETHODID],
	[dbo].[BONDGLACCOUNTXREF].[PERCENTAGE],
	[DEBITGLACCOUNT].[NAME] AS [DEBITGLACCOUNTNAME],
	[CREDITTGLACCOUNT].[NAME] AS [CREDITGLACCOUNTNAME],
	[dbo].[CAPAYMENTMETHOD].[NAME] AS [PAYMENTMETHODNAME]
FROM [dbo].[BONDGLACCOUNTXREF]
JOIN [dbo].[CAPAYMENTMETHOD] ON [dbo].[CAPAYMENTMETHOD].[CAPAYMENTMETHODID] = [dbo].[BONDGLACCOUNTXREF].[CAPAYMENTMETHODID]
LEFT JOIN [dbo].[GLACCOUNT] [DEBITGLACCOUNT] ON [DEBITGLACCOUNT].[GLACCOUNTID] = [dbo].[BONDGLACCOUNTXREF].[DEBITGLACCOUNTID]
LEFT JOIN [dbo].[GLACCOUNT] [CREDITTGLACCOUNT] ON [CREDITTGLACCOUNT].[GLACCOUNTID] = [dbo].[BONDGLACCOUNTXREF].[CREDITGLACCOUNTID]
WHERE
	[dbo].[BONDGLACCOUNTXREF].[BONDINTERESTSCHEDULEID] = @PARENTID  

END