CREATE PROCEDURE [globalsetup].[USP_CASETYPE_GET_BY_CUSTOMFIELDLAYOUTID]  
(  
 @CUSTOMFIELDLAYOUTID AS CHAR(36)  
)  
AS  
BEGIN  
SET NOCOUNT ON;  
 SELECT * FROM  
(  
  --Permit Management  
  SELECT 2 AS ENTITYID,   
    [dbo].[PMPERMITTYPE].[PMPERMITTYPEID] AS TYPEID,   
    [dbo].[PMPERMITTYPE].[NAME] AS TYPENAME,  
    [dbo].[PMPERMITWORKCLASS].[NAME] AS WORKCLASSNAME,   
    (SELECT MODULENAME FROM [dbo].[CUSTOMFIELDMODULES] WHERE [dbo].[CUSTOMFIELDMODULES].[CUSTOMFIELDMODULEID] = 2) AS MODULENAME  
   FROM [dbo].[PMPERMITTYPE]  
     INNER JOIN [dbo].[PMPERMITTYPEWORKCLASS] ON [dbo].[PMPERMITTYPE].[PMPERMITTYPEID] = [dbo].[PMPERMITTYPEWORKCLASS].[PMPERMITTYPEID]  
     INNER JOIN [dbo].[PMPERMITWORKCLASS] ON [dbo].[PMPERMITWORKCLASS].[PMPERMITWORKCLASSID] = [dbo].[PMPERMITTYPEWORKCLASS].[PMPERMITWORKCLASSID]  
   WHERE [dbo].[PMPERMITTYPEWORKCLASS].[CUSTOMFIELDLAYOUTID] = @CUSTOMFIELDLAYOUTID OR [dbo].[PMPERMITTYPEWORKCLASS].[ONLINECUSTOMFIELDLAYOUTID]= @CUSTOMFIELDLAYOUTID  
  
  UNION ALL   
  
   --Plan Management  
  SELECT 3 AS ENTITYID,   
    [dbo].[PLPLANTYPE].[PLPLANTYPEID] AS TYPEID,   
    [dbo].[PLPLANTYPE].[PLANNAME] AS TYPENAME,   
    [dbo].[PLPLANWORKCLASS].[NAME] AS WORKCLASSNAME,   
    (SELECT MODULENAME FROM [dbo].[CUSTOMFIELDMODULES] WHERE [dbo].[CUSTOMFIELDMODULES].[CUSTOMFIELDMODULEID] = 3) AS MODULENAME  
   FROM [dbo].[PLPLANTYPE]  
     INNER JOIN [dbo].[PLPLANTYPEWORKCLASS] ON [dbo].[PLPLANTYPE].[PLPLANTYPEID] = [dbo].[PLPLANTYPEWORKCLASS].[PLPLANTYPEID]  
     INNER JOIN  [dbo].[PLPLANWORKCLASS] ON [dbo].[PLPLANWORKCLASS].[PLPLANWORKCLASSID] = [dbo].[PLPLANTYPEWORKCLASS].[PLPLANWORKCLASSID]  
   WHERE [dbo].[PLPLANTYPEWORKCLASS].[CUSTOMFIELDLAYOUTID] = @CUSTOMFIELDLAYOUTID OR [dbo].[PLPLANTYPEWORKCLASS].[ONLINECUSTOMFIELDLAYOUTID] = @CUSTOMFIELDLAYOUTID  
     
  UNION ALL   
  
  ---- Inspections  
  SELECT 4 AS ENTITYID,   
    [dbo].[IMINSPECTIONTYPE].IMINSPECTIONTYPEID AS TYPEID,   
    [dbo].[IMINSPECTIONTYPE].[NAME] AS TYPENAME,   
    NULL AS WORKCLASSNAME,   
    (SELECT MODULENAME FROM [dbo].[CUSTOMFIELDMODULES] WHERE [dbo].[CUSTOMFIELDMODULES].[CUSTOMFIELDMODULEID] = 4) AS MODULENAME  
   FROM [dbo].[IMINSPECTIONTYPE]  
   WHERE [dbo].[IMINSPECTIONTYPE].GCUSTOMFIELDLAYOUTS = @CUSTOMFIELDLAYOUTID OR [dbo].[IMINSPECTIONTYPE].GONLINECUSTOMFIELDLAYOUTS = @CUSTOMFIELDLAYOUTID  
  
  UNION ALL  
  
  -- Code Management   
  SELECT 5 AS ENTITYID,   
    [dbo].[CMCASETYPE].CMCASETYPEID AS TYPEID,   
    [dbo].[CMCASETYPE].[NAME] AS TYPENAME,   
    NULL AS WORKCLASSNAME,   
    (SELECT MODULENAME FROM [dbo].[CUSTOMFIELDMODULES] WHERE [dbo].[CUSTOMFIELDMODULES].[CUSTOMFIELDMODULEID] = 5) AS MODULENAME  
   FROM [dbo].[CMCASETYPE]  
   WHERE [dbo].[CMCASETYPE].CUSTOMFIELDID = @CUSTOMFIELDLAYOUTID OR [dbo].[CMCASETYPE].ONLINECUSTOMFIELDLAYOUTID = @CUSTOMFIELDLAYOUTID  
     
  UNION ALL   
  
  -- Professional License   
  SELECT 6 AS ENTITYID,   
    [dbo].[ILLICENSETYPE].[ILLICENSETYPEID] AS TYPEID,   
    [dbo].[ILLICENSETYPE].[NAME] AS TYPENAME,   
    [dbo].[ILLICENSECLASSIFICATION].[NAME] AS WORKCLASSNAME,  
    (SELECT MODULENAME FROM [dbo].[CUSTOMFIELDMODULES] WHERE [dbo].[CUSTOMFIELDMODULES].[CUSTOMFIELDMODULEID] = 6) AS MODULENAME  
   FROM [dbo].[ILLICENSETYPE]  
    INNER JOIN [dbo].[ILLICENSETYPELICENSECLASS] ON [dbo].[ILLICENSETYPE].[ILLICENSETYPEID] = [dbo].[ILLICENSETYPELICENSECLASS].[ILLICENSETYPEID]  
    INNER JOIN  [dbo].[ILLICENSECLASSIFICATION] ON [dbo].[ILLICENSECLASSIFICATION].[ILLICENSECLASSIFICATIONID] = [dbo].[ILLICENSETYPELICENSECLASS].[ILLICENSECLASSIFICATIONID]  
   WHERE [dbo].[ILLICENSETYPELICENSECLASS].[CUSTOMFIELDLAYOUTID] = @CUSTOMFIELDLAYOUTID OR [dbo].[ILLICENSETYPELICENSECLASS].[ONLINECUSTOMFIELDLAYOUTID] = @CUSTOMFIELDLAYOUTID  
  
  UNION ALL   
  
  -- Business License   
  SELECT 7 AS ENTITYID,   
    [dbo].[BLLICENSETYPE].[BLLICENSETYPEID] AS TYPEID,   
    [dbo].[BLLICENSETYPE].[NAME] AS TYPENAME,   
    [dbo].[BLLICENSECLASS].[NAME] AS WORKCLASSNAME,  
    (SELECT MODULENAME FROM [dbo].[CUSTOMFIELDMODULES] WHERE [dbo].[CUSTOMFIELDMODULES].[CUSTOMFIELDMODULEID] = 7) AS MODULENAME  
   FROM [dbo].[BLLICENSETYPE]  
    INNER JOIN [dbo].[BLLICENSETYPECLASS] ON [dbo].[BLLICENSETYPE].[BLLICENSETYPEID] = [dbo].[BLLICENSETYPECLASS].[BLLICENSETYPEID]  
    INNER JOIN  [dbo].[BLLICENSECLASS] ON [dbo].[BLLICENSECLASS].[BLLICENSECLASSID] = [dbo].[BLLICENSETYPECLASS].[BLLICENSECLASSID]  
   WHERE [dbo].[BLLICENSETYPECLASS].[CUSTOMFIELDLAYOUTID] = @CUSTOMFIELDLAYOUTID OR [dbo].[BLLICENSETYPECLASS].[ONLINECUSTOMFIELDLAYOUTID] = @CUSTOMFIELDLAYOUTID  
  
  UNION ALL   
  
  -- Request Management  
  SELECT 11 AS ENTITYID,   
    [dbo].[CITIZENREQUESTTYPE].[CITIZENREQUESTTYPEID] AS TYPEID,   
    [dbo].[CITIZENREQUESTTYPE].[NAME] AS TYPENAME,   
    NULL AS WORKCLASSNAME,   
    (SELECT MODULENAME FROM [dbo].[CUSTOMFIELDMODULES] WHERE [dbo].[CUSTOMFIELDMODULES].[CUSTOMFIELDMODULEID] = 11) AS MODULENAME   
   FROM [dbo].[CITIZENREQUESTTYPE]  
   WHERE [dbo].[CITIZENREQUESTTYPE].[CUSTOMFIELDLAYOUTS] = @CUSTOMFIELDLAYOUTID OR [dbo].[CITIZENREQUESTTYPE].[ONLINECUSTOMFIELDLAYOUTS]= @CUSTOMFIELDLAYOUTID  
   
  UNION ALL   
  
  -- Tax Remittance Management  
  SELECT 21 AS ENTITYID,  
    [dbo].[TXREMITTANCETYPE].TXREMITTANCETYPEID AS TYPEID,   
    [dbo].[TXREMITTANCETYPE].[NAME] AS TYPENAME,   
    NULL AS WORKCLASSNAME,   
    (SELECT MODULENAME FROM [dbo].[CUSTOMFIELDMODULES] WHERE [dbo].[CUSTOMFIELDMODULES].[CUSTOMFIELDMODULEID] = 21) AS MODULENAME  
    FROM [dbo].[TXREMITTANCETYPE]  
   WHERE [dbo].[TXREMITTANCETYPE].[CUSTOMFIELDLAYOUTID] = @CUSTOMFIELDLAYOUTID OR [dbo].[TXREMITTANCETYPE].[ONLINECUSTOMFIELDLAYOUTID] = @CUSTOMFIELDLAYOUTID  
  
  UNION ALL   
  
  -- Project Management  
  SELECT 55 AS ENTITYID,   
    [dbo].[PRPROJECTTYPE].PRPROJECTTYPEID AS TYPEID,   
    [dbo].[PRPROJECTTYPE].[NAME] AS TYPENAME,   
    NULL AS WORKCLASSNAME,   
    (SELECT MODULENAME FROM [dbo].[CUSTOMFIELDMODULES] WHERE [dbo].[CUSTOMFIELDMODULES].[CUSTOMFIELDMODULEID] = 55) AS MODULENAME  
   FROM [dbo].[PRPROJECTTYPE]  
   WHERE [dbo].[PRPROJECTTYPE].CUSTOMFIELDID = @CUSTOMFIELDLAYOUTID   
  
  UNION ALL   
  
  --Impact Management  
  SELECT 65 AS ENTITYID,   
    [dbo].[IPCASETYPE].IPCASETYPEID AS TYPEID,   
    [dbo].[IPCASETYPE].[NAME] AS TYPENAME,   
    NULL AS WORKCLASSNAME,   
    (SELECT MODULENAME FROM [dbo].[CUSTOMFIELDMODULES] WHERE [dbo].[CUSTOMFIELDMODULES].[CUSTOMFIELDMODULEID] = 65) AS MODULENAME    
   FROM [dbo].[IPCASETYPE]  
   WHERE [dbo].[IPCASETYPE].CUSTOMFIELDLAYOUTID = @CUSTOMFIELDLAYOUTID ) AS CUSTOMFIELDLAYOUTCASETYPES  
   ORDER BY CUSTOMFIELDLAYOUTCASETYPES.MODULENAME,CUSTOMFIELDLAYOUTCASETYPES.TYPENAME,CUSTOMFIELDLAYOUTCASETYPES.WORKCLASSNAME 
  
END