CREATE PROCEDURE [reviewcoordinator].[USP_ITEM_REVIEWS_GETBYPLSUBMITTALIDS]
	@SUBMITTALIDS AS RECORDIDS READONLY
AS
BEGIN

SET NOCOUNT ON;
SELECT 
	PLITEMREVIEW.PLSUBMITTALID,
	PLITEMREVIEW.ASSIGNEDDATE,
	PLITEMREVIEW.COMPLETEDATE,
	PLITEMREVIEW.DUEDATE,
	PLITEMREVIEW.PASSED,
	PLITEMREVIEW.NOTREQUIRED,
	PLITEMREVIEW.PRIORITYORDER,
	PLITEMREVIEW.PLITEMREVIEWID,
	PLITEMREVIEWSTATUS.PLITEMREVIEWSTATUSID,
	PLITEMREVIEWSTATUS.NAME STATUSNAME,
	PLITEMREVIEWSTATUS.FAILUREFLAG,
	PLITEMREVIEWSTATUS.SUCCESSFLAG,
	PLITEMREVIEWTYPE.NAME TYPENAME,
	DEPARTMENT.NAME DEPARTMENTNAME,
	USERS.SUSERGUID,
	USERS.BACTIVE,
	USERS.CREATEDON,
	USERS.EMAIL,
	USERS.FNAME,
	USERS.LNAME,
	USERS.ID,
	USERS.LASTCHANGEDON,
	USERS.PHONE
FROM PLITEMREVIEW
INNER JOIN PLITEMREVIEWSTATUS ON PLITEMREVIEWSTATUS.PLITEMREVIEWSTATUSID = PLITEMREVIEW.PLITEMREVIEWSTATUSID
INNER JOIN PLITEMREVIEWTYPE ON PLITEMREVIEWTYPE.PLITEMREVIEWTYPEID = PLITEMREVIEW.PLITEMREVIEWTYPEID 
INNER JOIN DEPARTMENT ON DEPARTMENT.DEPARTMENTID = PLITEMREVIEWTYPE.DEPARTMENTID
LEFT OUTER JOIN USERS ON USERS.SUSERGUID = PLITEMREVIEW.ASSIGNEDUSERID
WHERE PLITEMREVIEW.PLSUBMITTALID IN (SELECT RECORDID FROM @SUBMITTALIDS)
END