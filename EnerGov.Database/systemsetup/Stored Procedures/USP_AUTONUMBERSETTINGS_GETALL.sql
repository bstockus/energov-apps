CREATE PROCEDURE [systemsetup].[USP_AUTONUMBERSETTINGS_GETALL]
AS
BEGIN
SET NOCOUNT ON;
	SELECT 
		[dbo].[AUTONUMBERSETTINGS].[CLASSNAME],
		FRIENDLYNAME = CASE WHEN [dbo].[PMPERMITTYPE].[PMPERMITTYPEID] IS NOT NULL THEN 'EnerGovBusiness.PermitManagement.Permit'
						WHEN [dbo].[PLPLANTYPE].[PLPLANTYPEID] IS NOT NULL THEN 'EnerGovBusiness.PlanManagement.Plan'
						WHEN [dbo].[PRPROJECTTYPE].[PRPROJECTTYPEID] IS NOT NULL THEN 'EnerGovBusiness.ProjectManagement.Project'
						WHEN [dbo].[CMCASETYPE].[CMCASETYPEID] IS NOT NULL THEN 'EnerGovBusiness.CodeEnforcement.CodeCase'
						ELSE [dbo].[AUTONUMBERSETTINGS].[CLASSNAME] END,
		TYPENAME = ISNULL([dbo].[PMPERMITTYPE].[NAME], ISNULL([dbo].[PLPLANTYPE].[PLANNAME], ISNULL([dbo].[PRPROJECTTYPE].[NAME], 
				ISNULL([dbo].[CMCASETYPE].[NAME], '')))),
		[dbo].[AUTONUMBERSETTINGS].[FORMATSTRING],
		[dbo].[AUTONUMBERSETTINGS].[PADWITHZEROSTOLENGTH],
		[dbo].[AUTONUMBERSETTINGS].[NEXTVALUE],
		[dbo].[AUTONUMBERSETTINGS].[USERESET],
		[dbo].[AUTONUMBERSETTINGS].[LASTRESET]
	FROM 
		[dbo].[AUTONUMBERSETTINGS]
	LEFT JOIN
		[dbo].[PMPERMITTYPE] ON [dbo].[PMPERMITTYPE].[PMPERMITTYPEID] = [dbo].[AUTONUMBERSETTINGS].[CLASSNAME]
	LEFT JOIN
		[dbo].[PLPLANTYPE] ON [dbo].[PLPLANTYPE].[PLPLANTYPEID] = [dbo].[AUTONUMBERSETTINGS].[CLASSNAME]
	LEFT JOIN
		[dbo].[PRPROJECTTYPE] ON [dbo].[PRPROJECTTYPE].[PRPROJECTTYPEID] = [dbo].[AUTONUMBERSETTINGS].[CLASSNAME]
	LEFT JOIN
		[dbo].[CMCASETYPE] ON [dbo].[CMCASETYPE].[CMCASETYPEID] = [dbo].[AUTONUMBERSETTINGS].[CLASSNAME]
	ORDER BY
		FRIENDLYNAME
END