CREATE PROCEDURE [systemsetup].[USP_ROLESCUSTOMFIELDS_GETBYPARENTID]
(
	@ROLEID CHAR(36)
)
AS
BEGIN
	SELECT		[dbo].[ROLESCUSTOMFIELDS].[ROLECUSTOMFIELDID],
				[dbo].[ROLESCUSTOMFIELDS].[ROLEID],
				[dbo].[ROLESCUSTOMFIELDS].[CUSTOMFIELDID],
				[dbo].[ROLESCUSTOMFIELDS].[ISHIDDEN],
				[dbo].[ROLESCUSTOMFIELDS].[ISDISABLED],
				[dbo].[ROLESCUSTOMFIELDS].[CUSTOMFIELDTABLECOLUMNREFID],
				[dbo].[CUSTOMFIELD].[SFIELDNAME] AS [FIELDNAME],
				[dbo].[CUSTOMFIELDTYPE].[SNAME] AS [FIELDTYPE],
				[dbo].[CUSTOMFIELDLAYOUT].[SNAME] AS [LAYOUTNAME],
				[dbo].[CUSTOMFIELDMODULES].[MODULENAME],
				[dbo].[CUSTOMFIELDTABLE].[NAME] AS [TABLENAME]
	FROM		[dbo].[ROLESCUSTOMFIELDS]
	JOIN [dbo].[CUSTOMFIELD] ON [dbo].[ROLESCUSTOMFIELDS].[CUSTOMFIELDID] = [dbo].[CUSTOMFIELD].[GCUSTOMFIELD]
	LEFT JOIN [dbo].[CUSTOMFIELDTABLE] ON [dbo].[CUSTOMFIELD].[FKCUSTOMFIELDTABLE] = [dbo].[CUSTOMFIELDTABLE].[CUSTOMFIELDTABLEID]
	LEFT JOIN [dbo].[CUSTOMFIELDOBJECT] ON [dbo].[CUSTOMFIELD].[GCUSTOMFIELD] = [dbo].[CUSTOMFIELDOBJECT].[FKGCUSTOMFIELD]
	LEFT JOIN [dbo].[CUSTOMFIELDLAYOUT] ON [dbo].[CUSTOMFIELDOBJECT].[FKGCUSTOMFIELDLAYOUT] = [dbo].[CUSTOMFIELDLAYOUT].[GCUSTOMFIELDLAYOUTS]
	LEFT JOIN [dbo].[CUSTOMFIELDMODULES] ON [dbo].[CUSTOMFIELDLAYOUT].[CUSTOMFIELDMODULEID] = [dbo].[CUSTOMFIELDMODULES].[CUSTOMFIELDMODULEID]
	JOIN [dbo].[CUSTOMFIELDTYPE] ON [dbo].[CUSTOMFIELD].[FKICUSTOMFIELDTYPE] = [dbo].[CUSTOMFIELDTYPE].[ICUSTOMFIELDTYPE]
	WHERE		[dbo].[ROLESCUSTOMFIELDS].[ROLEID] = @ROLEID
	ORDER BY	[dbo].[CUSTOMFIELD].[SFIELDNAME] ASC
END