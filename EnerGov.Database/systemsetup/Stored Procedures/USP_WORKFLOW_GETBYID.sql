CREATE PROCEDURE [systemsetup].[USP_WORKFLOW_GETBYID]
(
	@WORKFLOWID CHAR(36)
)
AS
BEGIN
SET NOCOUNT ON;
SELECT 
	[dbo].[WORKFLOW].[WORKFLOWID],
	[dbo].[WORKFLOW].[MODULEID],
	[dbo].[WORKFLOW].[WORKFLOWNAME],
	[dbo].[WORKFLOW].[ROOTCLASSNAME],
	[dbo].[WORKFLOW].[LASTCHANGEDON],
	[dbo].[WORKFLOW].[LASTCHANGEDBY],
	[dbo].[WORKFLOW].[ISSERVER],
	[dbo].[WORKFLOW].[ISCLIENT],
	[dbo].[WORKFLOW].[WORKFLOWDESCRIPTION],
	[dbo].[WORKFLOW].[ISENABLED],
	[dbo].[WORKFLOW].[ISPOSTPROCESS],
	[dbo].[WORKFLOW].[ROWVERSION]
FROM [dbo].[WORKFLOW]
WHERE
	[dbo].[WORKFLOW].[WORKFLOWID] = @WORKFLOWID
	
	Exec [systemsetup].[USP_WORKFLOWCONDITIONGROUP_GETBYPARENTID] @WORKFLOWID -- Condition Groups
	Exec [systemsetup].[USP_WORKFLOWCONDITION_GETBYPARENTID] @WORKFLOWID -- Conditions
	EXEC [systemsetup].[USP_WORKFLOWACTION_GETBYID] @WORKFLOWID -- Actions
	EXEC [systemsetup].[USP_WORKFLOWACTIONPARAMETER_GETBYPARENTID] @WORKFLOWID -- Action Type Compute Fees
	EXEC [systemsetup].[USP_WORKFLOWACTIONHOLDTYPE_GETBYPARENTID] @WORKFLOWID -- Action Type Apply Hold
	EXEC [systemsetup].[USP_WORKFLOWACTIONSETCALENDARDUEDA_GETBYPARENTID] @WORKFLOWID -- Action Type Calendar Due Dates
	EXEC [systemsetup].[USP_MAILMERGETEMPLATE_GETBYPARENTID] @WORKFLOWID -- Action Type Email
	EXEC [systemsetup].[USP_MAILMERGETEMPLATEUSER_GETBYPARENTID] @WORKFLOWID -- Action Type Email - users
	EXEC [systemsetup].[USP_WORKFLOWACTIONATTACHDOC_GETBYPARENTID] @WORKFLOWID -- Action Type Attachment Document
	EXEC [systemsetup].[USP_WORKFLOWACTIONSETVALUE_GETBYPARENTID] @WORKFLOWID -- Action Type Set Value
	EXEC [systemsetup].[USP_WORKFLOWACTIONFTP_GETBYPARENTID] @WORKFLOWID -- Action Type FTP
	EXEC [systemsetup].[USP_WORKFLOWACTIONTASK_GETBYPARENTID] @WORKFLOWID -- Action Type TASK
	EXEC [systemsetup].[USP_WORKFLOWACTIONTASKUSER_GETBYPARENTID] @WORKFLOWID -- TASK USER
END